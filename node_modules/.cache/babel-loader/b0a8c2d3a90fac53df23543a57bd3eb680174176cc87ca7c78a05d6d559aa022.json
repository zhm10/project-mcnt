{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst util = require(\"util\");\nconst truncateArgs = require(\"../logging/truncateArgs\");\n\n/** @typedef {import(\"../logging/createConsoleLogger\").LoggerConsole} LoggerConsole */\n\n/**\n * @param {Object} options options\n * @param {boolean=} options.colors colors\n * @param {boolean=} options.appendOnly append only\n * @param {NodeJS.WritableStream} options.stream stream\n * @returns {LoggerConsole} logger function\n */\nmodule.exports = ({\n  colors,\n  appendOnly,\n  stream\n}) => {\n  /** @type {string[] | undefined} */\n  let currentStatusMessage = undefined;\n  let hasStatusMessage = false;\n  let currentIndent = \"\";\n  let currentCollapsed = 0;\n\n  /**\n   * @param {string} str string\n   * @param {string} prefix prefix\n   * @param {string} colorPrefix color prefix\n   * @param {string} colorSuffix color suffix\n   * @returns {string} indented string\n   */\n  const indent = (str, prefix, colorPrefix, colorSuffix) => {\n    if (str === \"\") return str;\n    prefix = currentIndent + prefix;\n    if (colors) {\n      return prefix + colorPrefix + str.replace(/\\n/g, colorSuffix + \"\\n\" + prefix + colorPrefix) + colorSuffix;\n    } else {\n      return prefix + str.replace(/\\n/g, \"\\n\" + prefix);\n    }\n  };\n  const clearStatusMessage = () => {\n    if (hasStatusMessage) {\n      stream.write(\"\\x1b[2K\\r\");\n      hasStatusMessage = false;\n    }\n  };\n  const writeStatusMessage = () => {\n    if (!currentStatusMessage) return;\n    const l = /** @type {TODO} */stream.columns || 40;\n    const args = truncateArgs(currentStatusMessage, l - 1);\n    const str = args.join(\" \");\n    const coloredStr = `\\u001b[1m${str}\\u001b[39m\\u001b[22m`;\n    stream.write(`\\x1b[2K\\r${coloredStr}`);\n    hasStatusMessage = true;\n  };\n\n  /**\n   * @param {string} prefix prefix\n   * @param {string} colorPrefix color prefix\n   * @param {string} colorSuffix color suffix\n   * @returns {(function(...any[]): void)} function to write with colors\n   */\n  const writeColored = (prefix, colorPrefix, colorSuffix) => {\n    return (...args) => {\n      if (currentCollapsed > 0) return;\n      clearStatusMessage();\n      const str = indent(util.format(...args), prefix, colorPrefix, colorSuffix);\n      stream.write(str + \"\\n\");\n      writeStatusMessage();\n    };\n  };\n  const writeGroupMessage = writeColored(\"<-> \", \"\\u001b[1m\\u001b[36m\", \"\\u001b[39m\\u001b[22m\");\n  const writeGroupCollapsedMessage = writeColored(\"<+> \", \"\\u001b[1m\\u001b[36m\", \"\\u001b[39m\\u001b[22m\");\n  return {\n    log: writeColored(\"    \", \"\\u001b[1m\", \"\\u001b[22m\"),\n    debug: writeColored(\"    \", \"\", \"\"),\n    trace: writeColored(\"    \", \"\", \"\"),\n    info: writeColored(\"<i> \", \"\\u001b[1m\\u001b[32m\", \"\\u001b[39m\\u001b[22m\"),\n    warn: writeColored(\"<w> \", \"\\u001b[1m\\u001b[33m\", \"\\u001b[39m\\u001b[22m\"),\n    error: writeColored(\"<e> \", \"\\u001b[1m\\u001b[31m\", \"\\u001b[39m\\u001b[22m\"),\n    logTime: writeColored(\"<t> \", \"\\u001b[1m\\u001b[35m\", \"\\u001b[39m\\u001b[22m\"),\n    group: (...args) => {\n      writeGroupMessage(...args);\n      if (currentCollapsed > 0) {\n        currentCollapsed++;\n      } else {\n        currentIndent += \"  \";\n      }\n    },\n    groupCollapsed: (...args) => {\n      writeGroupCollapsedMessage(...args);\n      currentCollapsed++;\n    },\n    groupEnd: () => {\n      if (currentCollapsed > 0) currentCollapsed--;else if (currentIndent.length >= 2) currentIndent = currentIndent.slice(0, currentIndent.length - 2);\n    },\n    profile: console.profile && (name => console.profile(name)),\n    profileEnd: console.profileEnd && (name => console.profileEnd(name)),\n    clear: !appendOnly && console.clear && (() => {\n      clearStatusMessage();\n      console.clear();\n      writeStatusMessage();\n    }),\n    status: appendOnly ? writeColored(\"<s> \", \"\", \"\") : (name, ...args) => {\n      args = args.filter(Boolean);\n      if (name === undefined && args.length === 0) {\n        clearStatusMessage();\n        currentStatusMessage = undefined;\n      } else if (typeof name === \"string\" && name.startsWith(\"[webpack.Progress] \")) {\n        currentStatusMessage = [name.slice(19), ...args];\n        writeStatusMessage();\n      } else if (name === \"[webpack.Progress]\") {\n        currentStatusMessage = [...args];\n        writeStatusMessage();\n      } else {\n        currentStatusMessage = [name, ...args];\n        writeStatusMessage();\n      }\n    }\n  };\n};","map":{"version":3,"names":["util","require","truncateArgs","module","exports","colors","appendOnly","stream","currentStatusMessage","undefined","hasStatusMessage","currentIndent","currentCollapsed","indent","str","prefix","colorPrefix","colorSuffix","replace","clearStatusMessage","write","writeStatusMessage","l","columns","args","join","coloredStr","writeColored","format","writeGroupMessage","writeGroupCollapsedMessage","log","debug","trace","info","warn","error","logTime","group","groupCollapsed","groupEnd","length","slice","profile","console","name","profileEnd","clear","status","filter","Boolean","startsWith"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/node/nodeConsole.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst util = require(\"util\");\nconst truncateArgs = require(\"../logging/truncateArgs\");\n\n/** @typedef {import(\"../logging/createConsoleLogger\").LoggerConsole} LoggerConsole */\n\n/**\n * @param {Object} options options\n * @param {boolean=} options.colors colors\n * @param {boolean=} options.appendOnly append only\n * @param {NodeJS.WritableStream} options.stream stream\n * @returns {LoggerConsole} logger function\n */\nmodule.exports = ({ colors, appendOnly, stream }) => {\n\t/** @type {string[] | undefined} */\n\tlet currentStatusMessage = undefined;\n\tlet hasStatusMessage = false;\n\tlet currentIndent = \"\";\n\tlet currentCollapsed = 0;\n\n\t/**\n\t * @param {string} str string\n\t * @param {string} prefix prefix\n\t * @param {string} colorPrefix color prefix\n\t * @param {string} colorSuffix color suffix\n\t * @returns {string} indented string\n\t */\n\tconst indent = (str, prefix, colorPrefix, colorSuffix) => {\n\t\tif (str === \"\") return str;\n\t\tprefix = currentIndent + prefix;\n\t\tif (colors) {\n\t\t\treturn (\n\t\t\t\tprefix +\n\t\t\t\tcolorPrefix +\n\t\t\t\tstr.replace(/\\n/g, colorSuffix + \"\\n\" + prefix + colorPrefix) +\n\t\t\t\tcolorSuffix\n\t\t\t);\n\t\t} else {\n\t\t\treturn prefix + str.replace(/\\n/g, \"\\n\" + prefix);\n\t\t}\n\t};\n\n\tconst clearStatusMessage = () => {\n\t\tif (hasStatusMessage) {\n\t\t\tstream.write(\"\\x1b[2K\\r\");\n\t\t\thasStatusMessage = false;\n\t\t}\n\t};\n\n\tconst writeStatusMessage = () => {\n\t\tif (!currentStatusMessage) return;\n\t\tconst l = /** @type {TODO} */ (stream).columns || 40;\n\t\tconst args = truncateArgs(currentStatusMessage, l - 1);\n\t\tconst str = args.join(\" \");\n\t\tconst coloredStr = `\\u001b[1m${str}\\u001b[39m\\u001b[22m`;\n\t\tstream.write(`\\x1b[2K\\r${coloredStr}`);\n\t\thasStatusMessage = true;\n\t};\n\n\t/**\n\t * @param {string} prefix prefix\n\t * @param {string} colorPrefix color prefix\n\t * @param {string} colorSuffix color suffix\n\t * @returns {(function(...any[]): void)} function to write with colors\n\t */\n\tconst writeColored = (prefix, colorPrefix, colorSuffix) => {\n\t\treturn (...args) => {\n\t\t\tif (currentCollapsed > 0) return;\n\t\t\tclearStatusMessage();\n\t\t\tconst str = indent(\n\t\t\t\tutil.format(...args),\n\t\t\t\tprefix,\n\t\t\t\tcolorPrefix,\n\t\t\t\tcolorSuffix\n\t\t\t);\n\t\t\tstream.write(str + \"\\n\");\n\t\t\twriteStatusMessage();\n\t\t};\n\t};\n\n\tconst writeGroupMessage = writeColored(\n\t\t\"<-> \",\n\t\t\"\\u001b[1m\\u001b[36m\",\n\t\t\"\\u001b[39m\\u001b[22m\"\n\t);\n\n\tconst writeGroupCollapsedMessage = writeColored(\n\t\t\"<+> \",\n\t\t\"\\u001b[1m\\u001b[36m\",\n\t\t\"\\u001b[39m\\u001b[22m\"\n\t);\n\n\treturn {\n\t\tlog: writeColored(\"    \", \"\\u001b[1m\", \"\\u001b[22m\"),\n\t\tdebug: writeColored(\"    \", \"\", \"\"),\n\t\ttrace: writeColored(\"    \", \"\", \"\"),\n\t\tinfo: writeColored(\"<i> \", \"\\u001b[1m\\u001b[32m\", \"\\u001b[39m\\u001b[22m\"),\n\t\twarn: writeColored(\"<w> \", \"\\u001b[1m\\u001b[33m\", \"\\u001b[39m\\u001b[22m\"),\n\t\terror: writeColored(\"<e> \", \"\\u001b[1m\\u001b[31m\", \"\\u001b[39m\\u001b[22m\"),\n\t\tlogTime: writeColored(\n\t\t\t\"<t> \",\n\t\t\t\"\\u001b[1m\\u001b[35m\",\n\t\t\t\"\\u001b[39m\\u001b[22m\"\n\t\t),\n\t\tgroup: (...args) => {\n\t\t\twriteGroupMessage(...args);\n\t\t\tif (currentCollapsed > 0) {\n\t\t\t\tcurrentCollapsed++;\n\t\t\t} else {\n\t\t\t\tcurrentIndent += \"  \";\n\t\t\t}\n\t\t},\n\t\tgroupCollapsed: (...args) => {\n\t\t\twriteGroupCollapsedMessage(...args);\n\t\t\tcurrentCollapsed++;\n\t\t},\n\t\tgroupEnd: () => {\n\t\t\tif (currentCollapsed > 0) currentCollapsed--;\n\t\t\telse if (currentIndent.length >= 2)\n\t\t\t\tcurrentIndent = currentIndent.slice(0, currentIndent.length - 2);\n\t\t},\n\t\tprofile: console.profile && (name => console.profile(name)),\n\t\tprofileEnd: console.profileEnd && (name => console.profileEnd(name)),\n\t\tclear:\n\t\t\t!appendOnly &&\n\t\t\tconsole.clear &&\n\t\t\t(() => {\n\t\t\t\tclearStatusMessage();\n\t\t\t\tconsole.clear();\n\t\t\t\twriteStatusMessage();\n\t\t\t}),\n\t\tstatus: appendOnly\n\t\t\t? writeColored(\"<s> \", \"\", \"\")\n\t\t\t: (name, ...args) => {\n\t\t\t\t\targs = args.filter(Boolean);\n\t\t\t\t\tif (name === undefined && args.length === 0) {\n\t\t\t\t\t\tclearStatusMessage();\n\t\t\t\t\t\tcurrentStatusMessage = undefined;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\ttypeof name === \"string\" &&\n\t\t\t\t\t\tname.startsWith(\"[webpack.Progress] \")\n\t\t\t\t\t) {\n\t\t\t\t\t\tcurrentStatusMessage = [name.slice(19), ...args];\n\t\t\t\t\t\twriteStatusMessage();\n\t\t\t\t\t} else if (name === \"[webpack.Progress]\") {\n\t\t\t\t\t\tcurrentStatusMessage = [...args];\n\t\t\t\t\t\twriteStatusMessage();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentStatusMessage = [name, ...args];\n\t\t\t\t\t\twriteStatusMessage();\n\t\t\t\t\t}\n\t\t\t\t}\n\t};\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}