{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst RuntimeModule = require(\"../RuntimeModule\");\nconst SelfModuleFactory = require(\"../SelfModuleFactory\");\nconst Template = require(\"../Template\");\nconst CommonJsExportsDependency = require(\"./CommonJsExportsDependency\");\nconst CommonJsFullRequireDependency = require(\"./CommonJsFullRequireDependency\");\nconst CommonJsRequireContextDependency = require(\"./CommonJsRequireContextDependency\");\nconst CommonJsRequireDependency = require(\"./CommonJsRequireDependency\");\nconst CommonJsSelfReferenceDependency = require(\"./CommonJsSelfReferenceDependency\");\nconst ModuleDecoratorDependency = require(\"./ModuleDecoratorDependency\");\nconst RequireHeaderDependency = require(\"./RequireHeaderDependency\");\nconst RequireResolveContextDependency = require(\"./RequireResolveContextDependency\");\nconst RequireResolveDependency = require(\"./RequireResolveDependency\");\nconst RequireResolveHeaderDependency = require(\"./RequireResolveHeaderDependency\");\nconst RuntimeRequirementsDependency = require(\"./RuntimeRequirementsDependency\");\nconst CommonJsExportsParserPlugin = require(\"./CommonJsExportsParserPlugin\");\nconst CommonJsImportsParserPlugin = require(\"./CommonJsImportsParserPlugin\");\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\nconst {\n  evaluateToIdentifier,\n  toConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst CommonJsExportRequireDependency = require(\"./CommonJsExportRequireDependency\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../Module\").BuildInfo} BuildInfo */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n\nconst PLUGIN_NAME = \"CommonJsPlugin\";\nclass CommonJsPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, {\n      contextModuleFactory,\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(CommonJsRequireDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(CommonJsRequireDependency, new CommonJsRequireDependency.Template());\n      compilation.dependencyFactories.set(CommonJsFullRequireDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(CommonJsFullRequireDependency, new CommonJsFullRequireDependency.Template());\n      compilation.dependencyFactories.set(CommonJsRequireContextDependency, contextModuleFactory);\n      compilation.dependencyTemplates.set(CommonJsRequireContextDependency, new CommonJsRequireContextDependency.Template());\n      compilation.dependencyFactories.set(RequireResolveDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(RequireResolveDependency, new RequireResolveDependency.Template());\n      compilation.dependencyFactories.set(RequireResolveContextDependency, contextModuleFactory);\n      compilation.dependencyTemplates.set(RequireResolveContextDependency, new RequireResolveContextDependency.Template());\n      compilation.dependencyTemplates.set(RequireResolveHeaderDependency, new RequireResolveHeaderDependency.Template());\n      compilation.dependencyTemplates.set(RequireHeaderDependency, new RequireHeaderDependency.Template());\n      compilation.dependencyTemplates.set(CommonJsExportsDependency, new CommonJsExportsDependency.Template());\n      compilation.dependencyFactories.set(CommonJsExportRequireDependency, normalModuleFactory);\n      compilation.dependencyTemplates.set(CommonJsExportRequireDependency, new CommonJsExportRequireDependency.Template());\n      const selfFactory = new SelfModuleFactory(compilation.moduleGraph);\n      compilation.dependencyFactories.set(CommonJsSelfReferenceDependency, selfFactory);\n      compilation.dependencyTemplates.set(CommonJsSelfReferenceDependency, new CommonJsSelfReferenceDependency.Template());\n      compilation.dependencyFactories.set(ModuleDecoratorDependency, selfFactory);\n      compilation.dependencyTemplates.set(ModuleDecoratorDependency, new ModuleDecoratorDependency.Template());\n      compilation.hooks.runtimeRequirementInModule.for(RuntimeGlobals.harmonyModuleDecorator).tap(PLUGIN_NAME, (module, set) => {\n        set.add(RuntimeGlobals.module);\n        set.add(RuntimeGlobals.requireScope);\n      });\n      compilation.hooks.runtimeRequirementInModule.for(RuntimeGlobals.nodeModuleDecorator).tap(PLUGIN_NAME, (module, set) => {\n        set.add(RuntimeGlobals.module);\n        set.add(RuntimeGlobals.requireScope);\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.harmonyModuleDecorator).tap(PLUGIN_NAME, (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new HarmonyModuleDecoratorRuntimeModule());\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.nodeModuleDecorator).tap(PLUGIN_NAME, (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new NodeModuleDecoratorRuntimeModule());\n      });\n\n      /**\n       * @param {Parser} parser parser parser\n       * @param {JavascriptParserOptions} parserOptions parserOptions\n       * @returns {void}\n       */\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.commonjs !== undefined && !parserOptions.commonjs) return;\n        parser.hooks.typeof.for(\"module\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"object\")));\n        parser.hooks.expression.for(\"require.main\").tap(PLUGIN_NAME, toConstantDependency(parser, `${RuntimeGlobals.moduleCache}[${RuntimeGlobals.entryModuleId}]`, [RuntimeGlobals.moduleCache, RuntimeGlobals.entryModuleId]));\n        parser.hooks.expression.for(RuntimeGlobals.moduleLoaded).tap(PLUGIN_NAME, expr => {\n          /** @type {BuildInfo} */\n          parser.state.module.buildInfo.moduleConcatenationBailout = RuntimeGlobals.moduleLoaded;\n          const dep = new RuntimeRequirementsDependency([RuntimeGlobals.moduleLoaded]);\n          dep.loc = /** @type {DependencyLocation} */expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.expression.for(RuntimeGlobals.moduleId).tap(PLUGIN_NAME, expr => {\n          /** @type {BuildInfo} */\n          parser.state.module.buildInfo.moduleConcatenationBailout = RuntimeGlobals.moduleId;\n          const dep = new RuntimeRequirementsDependency([RuntimeGlobals.moduleId]);\n          dep.loc = /** @type {DependencyLocation} */expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateIdentifier.for(\"module.hot\").tap(PLUGIN_NAME, evaluateToIdentifier(\"module.hot\", \"module\", () => [\"hot\"], null));\n        new CommonJsImportsParserPlugin(parserOptions).apply(parser);\n        new CommonJsExportsParserPlugin(compilation.moduleGraph).apply(parser);\n      };\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n    });\n  }\n}\nclass HarmonyModuleDecoratorRuntimeModule extends RuntimeModule {\n  constructor() {\n    super(\"harmony module decorator\");\n  }\n\n  /**\n   * @returns {string | null} runtime code\n   */\n  generate() {\n    const {\n      runtimeTemplate\n    } = /** @type {Compilation} */this.compilation;\n    return Template.asString([`${RuntimeGlobals.harmonyModuleDecorator} = ${runtimeTemplate.basicFunction(\"module\", [\"module = Object.create(module);\", \"if (!module.children) module.children = [];\", \"Object.defineProperty(module, 'exports', {\", Template.indent([\"enumerable: true,\", `set: ${runtimeTemplate.basicFunction(\"\", [\"throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\"])}`]), \"});\", \"return module;\"])};`]);\n  }\n}\nclass NodeModuleDecoratorRuntimeModule extends RuntimeModule {\n  constructor() {\n    super(\"node module decorator\");\n  }\n\n  /**\n   * @returns {string | null} runtime code\n   */\n  generate() {\n    const {\n      runtimeTemplate\n    } = /** @type {Compilation} */this.compilation;\n    return Template.asString([`${RuntimeGlobals.nodeModuleDecorator} = ${runtimeTemplate.basicFunction(\"module\", [\"module.paths = [];\", \"if (!module.children) module.children = [];\", \"return module;\"])};`]);\n  }\n}\nmodule.exports = CommonJsPlugin;","map":{"version":3,"names":["RuntimeGlobals","require","RuntimeModule","SelfModuleFactory","Template","CommonJsExportsDependency","CommonJsFullRequireDependency","CommonJsRequireContextDependency","CommonJsRequireDependency","CommonJsSelfReferenceDependency","ModuleDecoratorDependency","RequireHeaderDependency","RequireResolveContextDependency","RequireResolveDependency","RequireResolveHeaderDependency","RuntimeRequirementsDependency","CommonJsExportsParserPlugin","CommonJsImportsParserPlugin","JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","evaluateToIdentifier","toConstantDependency","CommonJsExportRequireDependency","PLUGIN_NAME","CommonJsPlugin","apply","compiler","hooks","compilation","tap","contextModuleFactory","normalModuleFactory","dependencyFactories","set","dependencyTemplates","selfFactory","moduleGraph","runtimeRequirementInModule","for","harmonyModuleDecorator","module","add","requireScope","nodeModuleDecorator","runtimeRequirementInTree","chunk","addRuntimeModule","HarmonyModuleDecoratorRuntimeModule","NodeModuleDecoratorRuntimeModule","handler","parser","parserOptions","commonjs","undefined","typeof","JSON","stringify","expression","moduleCache","entryModuleId","moduleLoaded","expr","state","buildInfo","moduleConcatenationBailout","dep","loc","addPresentationalDependency","moduleId","evaluateIdentifier","constructor","generate","runtimeTemplate","asString","basicFunction","indent","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/dependencies/CommonJsPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst RuntimeModule = require(\"../RuntimeModule\");\nconst SelfModuleFactory = require(\"../SelfModuleFactory\");\nconst Template = require(\"../Template\");\nconst CommonJsExportsDependency = require(\"./CommonJsExportsDependency\");\nconst CommonJsFullRequireDependency = require(\"./CommonJsFullRequireDependency\");\nconst CommonJsRequireContextDependency = require(\"./CommonJsRequireContextDependency\");\nconst CommonJsRequireDependency = require(\"./CommonJsRequireDependency\");\nconst CommonJsSelfReferenceDependency = require(\"./CommonJsSelfReferenceDependency\");\nconst ModuleDecoratorDependency = require(\"./ModuleDecoratorDependency\");\nconst RequireHeaderDependency = require(\"./RequireHeaderDependency\");\nconst RequireResolveContextDependency = require(\"./RequireResolveContextDependency\");\nconst RequireResolveDependency = require(\"./RequireResolveDependency\");\nconst RequireResolveHeaderDependency = require(\"./RequireResolveHeaderDependency\");\nconst RuntimeRequirementsDependency = require(\"./RuntimeRequirementsDependency\");\n\nconst CommonJsExportsParserPlugin = require(\"./CommonJsExportsParserPlugin\");\nconst CommonJsImportsParserPlugin = require(\"./CommonJsImportsParserPlugin\");\n\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\nconst {\n\tevaluateToIdentifier,\n\ttoConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst CommonJsExportRequireDependency = require(\"./CommonJsExportRequireDependency\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../Module\").BuildInfo} BuildInfo */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n\nconst PLUGIN_NAME = \"CommonJsPlugin\";\n\nclass CommonJsPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { contextModuleFactory, normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tCommonJsRequireDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsRequireDependency,\n\t\t\t\t\tnew CommonJsRequireDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tCommonJsFullRequireDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsFullRequireDependency,\n\t\t\t\t\tnew CommonJsFullRequireDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tCommonJsRequireContextDependency,\n\t\t\t\t\tcontextModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsRequireContextDependency,\n\t\t\t\t\tnew CommonJsRequireContextDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tRequireResolveDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tRequireResolveDependency,\n\t\t\t\t\tnew RequireResolveDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tRequireResolveContextDependency,\n\t\t\t\t\tcontextModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tRequireResolveContextDependency,\n\t\t\t\t\tnew RequireResolveContextDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tRequireResolveHeaderDependency,\n\t\t\t\t\tnew RequireResolveHeaderDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tRequireHeaderDependency,\n\t\t\t\t\tnew RequireHeaderDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsExportsDependency,\n\t\t\t\t\tnew CommonJsExportsDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tCommonJsExportRequireDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsExportRequireDependency,\n\t\t\t\t\tnew CommonJsExportRequireDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tconst selfFactory = new SelfModuleFactory(compilation.moduleGraph);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tCommonJsSelfReferenceDependency,\n\t\t\t\t\tselfFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tCommonJsSelfReferenceDependency,\n\t\t\t\t\tnew CommonJsSelfReferenceDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tModuleDecoratorDependency,\n\t\t\t\t\tselfFactory\n\t\t\t\t);\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tModuleDecoratorDependency,\n\t\t\t\t\tnew ModuleDecoratorDependency.Template()\n\t\t\t\t);\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInModule\n\t\t\t\t\t.for(RuntimeGlobals.harmonyModuleDecorator)\n\t\t\t\t\t.tap(PLUGIN_NAME, (module, set) => {\n\t\t\t\t\t\tset.add(RuntimeGlobals.module);\n\t\t\t\t\t\tset.add(RuntimeGlobals.requireScope);\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInModule\n\t\t\t\t\t.for(RuntimeGlobals.nodeModuleDecorator)\n\t\t\t\t\t.tap(PLUGIN_NAME, (module, set) => {\n\t\t\t\t\t\tset.add(RuntimeGlobals.module);\n\t\t\t\t\t\tset.add(RuntimeGlobals.requireScope);\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.harmonyModuleDecorator)\n\t\t\t\t\t.tap(PLUGIN_NAME, (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew HarmonyModuleDecoratorRuntimeModule()\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.nodeModuleDecorator)\n\t\t\t\t\t.tap(PLUGIN_NAME, (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew NodeModuleDecoratorRuntimeModule()\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * @param {Parser} parser parser parser\n\t\t\t\t * @param {JavascriptParserOptions} parserOptions parserOptions\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (parserOptions.commonjs !== undefined && !parserOptions.commonjs)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"module\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"object\"))\n\t\t\t\t\t\t);\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"require.main\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t`${RuntimeGlobals.moduleCache}[${RuntimeGlobals.entryModuleId}]`,\n\t\t\t\t\t\t\t\t[RuntimeGlobals.moduleCache, RuntimeGlobals.entryModuleId]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(RuntimeGlobals.moduleLoaded)\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t/** @type {BuildInfo} */\n\t\t\t\t\t\t\t(parser.state.module.buildInfo).moduleConcatenationBailout =\n\t\t\t\t\t\t\t\tRuntimeGlobals.moduleLoaded;\n\t\t\t\t\t\t\tconst dep = new RuntimeRequirementsDependency([\n\t\t\t\t\t\t\t\tRuntimeGlobals.moduleLoaded\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(RuntimeGlobals.moduleId)\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t/** @type {BuildInfo} */\n\t\t\t\t\t\t\t(parser.state.module.buildInfo).moduleConcatenationBailout =\n\t\t\t\t\t\t\t\tRuntimeGlobals.moduleId;\n\t\t\t\t\t\t\tconst dep = new RuntimeRequirementsDependency([\n\t\t\t\t\t\t\t\tRuntimeGlobals.moduleId\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.evaluateIdentifier.for(\"module.hot\").tap(\n\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\tevaluateToIdentifier(\"module.hot\", \"module\", () => [\"hot\"], null)\n\t\t\t\t\t);\n\n\t\t\t\t\tnew CommonJsImportsParserPlugin(parserOptions).apply(parser);\n\t\t\t\t\tnew CommonJsExportsParserPlugin(compilation.moduleGraph).apply(\n\t\t\t\t\t\tparser\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nclass HarmonyModuleDecoratorRuntimeModule extends RuntimeModule {\n\tconstructor() {\n\t\tsuper(\"harmony module decorator\");\n\t}\n\n\t/**\n\t * @returns {string | null} runtime code\n\t */\n\tgenerate() {\n\t\tconst { runtimeTemplate } = /** @type {Compilation} */ (this.compilation);\n\t\treturn Template.asString([\n\t\t\t`${\n\t\t\t\tRuntimeGlobals.harmonyModuleDecorator\n\t\t\t} = ${runtimeTemplate.basicFunction(\"module\", [\n\t\t\t\t\"module = Object.create(module);\",\n\t\t\t\t\"if (!module.children) module.children = [];\",\n\t\t\t\t\"Object.defineProperty(module, 'exports', {\",\n\t\t\t\tTemplate.indent([\n\t\t\t\t\t\"enumerable: true,\",\n\t\t\t\t\t`set: ${runtimeTemplate.basicFunction(\"\", [\n\t\t\t\t\t\t\"throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\"\n\t\t\t\t\t])}`\n\t\t\t\t]),\n\t\t\t\t\"});\",\n\t\t\t\t\"return module;\"\n\t\t\t])};`\n\t\t]);\n\t}\n}\n\nclass NodeModuleDecoratorRuntimeModule extends RuntimeModule {\n\tconstructor() {\n\t\tsuper(\"node module decorator\");\n\t}\n\n\t/**\n\t * @returns {string | null} runtime code\n\t */\n\tgenerate() {\n\t\tconst { runtimeTemplate } = /** @type {Compilation} */ (this.compilation);\n\t\treturn Template.asString([\n\t\t\t`${RuntimeGlobals.nodeModuleDecorator} = ${runtimeTemplate.basicFunction(\n\t\t\t\t\"module\",\n\t\t\t\t[\n\t\t\t\t\t\"module.paths = [];\",\n\t\t\t\t\t\"if (!module.children) module.children = [];\",\n\t\t\t\t\t\"return module;\"\n\t\t\t\t]\n\t\t\t)};`\n\t\t]);\n\t}\n}\n\nmodule.exports = CommonJsPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}