{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n  UsageState\n} = require(\"../ExportsInfo\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst {\n  filterRuntime,\n  deepMergeRuntime\n} = require(\"../util/runtime\");\nconst NullDependency = require(\"./NullDependency\");\n\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n/** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n/** @typedef {import(\"../Dependency\")} Dependency */\n/** @typedef {import(\"../Dependency\").UpdateHashContext} UpdateHashContext */\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../ModuleGraphConnection\").ConnectionState} ConnectionState */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n/** @typedef {import(\"../util/Hash\")} Hash */\n\nclass PureExpressionDependency extends NullDependency {\n  /**\n   * @param {Range} range the source range\n   */\n  constructor(range) {\n    super();\n    this.range = range;\n    /** @type {Set<string> | false} */\n    this.usedByExports = false;\n    this._hashUpdate = undefined;\n  }\n\n  /**\n   * Update the hash\n   * @param {Hash} hash hash to be updated\n   * @param {UpdateHashContext} context context\n   * @returns {void}\n   */\n  updateHash(hash, context) {\n    if (this._hashUpdate === undefined) {\n      this._hashUpdate = this.range + \"\";\n    }\n    hash.update(this._hashUpdate);\n  }\n\n  /**\n   * @param {ModuleGraph} moduleGraph the module graph\n   * @returns {ConnectionState} how this dependency connects the module to referencing modules\n   */\n  getModuleEvaluationSideEffectsState(moduleGraph) {\n    return false;\n  }\n\n  /**\n   * @param {ObjectSerializerContext} context context\n   */\n  serialize(context) {\n    const {\n      write\n    } = context;\n    write(this.range);\n    write(this.usedByExports);\n    super.serialize(context);\n  }\n\n  /**\n   * @param {ObjectDeserializerContext} context context\n   */\n  deserialize(context) {\n    const {\n      read\n    } = context;\n    this.range = read();\n    this.usedByExports = read();\n    super.deserialize(context);\n  }\n}\nmakeSerializable(PureExpressionDependency, \"webpack/lib/dependencies/PureExpressionDependency\");\nPureExpressionDependency.Template = class PureExpressionDependencyTemplate extends NullDependency.Template {\n  /**\n   * @param {Dependency} dependency the dependency for which the template should be applied\n   * @param {ReplaceSource} source the current replace source which can be modified\n   * @param {DependencyTemplateContext} templateContext the context object\n   * @returns {void}\n   */\n  apply(dependency, source, {\n    chunkGraph,\n    moduleGraph,\n    runtime,\n    runtimes,\n    runtimeTemplate,\n    runtimeRequirements\n  }) {\n    const dep = /** @type {PureExpressionDependency} */dependency;\n    const usedByExports = dep.usedByExports;\n    if (usedByExports !== false) {\n      const selfModule = /** @type {Module} */\n      moduleGraph.getParentModule(dep);\n      const exportsInfo = moduleGraph.getExportsInfo(selfModule);\n      const merged = deepMergeRuntime(runtimes, runtime);\n      const runtimeCondition = filterRuntime(merged, runtime => {\n        for (const exportName of usedByExports) {\n          if (exportsInfo.getUsed(exportName, runtime) !== UsageState.Unused) {\n            return true;\n          }\n        }\n        return false;\n      });\n      if (runtimeCondition === true) return;\n      if (runtimeCondition !== false) {\n        const condition = runtimeTemplate.runtimeConditionExpression({\n          chunkGraph,\n          runtime: merged,\n          runtimeCondition,\n          runtimeRequirements\n        });\n        source.insert(dep.range[0], `(/* runtime-dependent pure expression or super */ ${condition} ? (`);\n        source.insert(dep.range[1], \") : null)\");\n        return;\n      }\n    }\n    source.insert(dep.range[0], `(/* unused pure expression or super */ null && (`);\n    source.insert(dep.range[1], \"))\");\n  }\n};\nmodule.exports = PureExpressionDependency;","map":{"version":3,"names":["UsageState","require","makeSerializable","filterRuntime","deepMergeRuntime","NullDependency","PureExpressionDependency","constructor","range","usedByExports","_hashUpdate","undefined","updateHash","hash","context","update","getModuleEvaluationSideEffectsState","moduleGraph","serialize","write","deserialize","read","Template","PureExpressionDependencyTemplate","apply","dependency","source","chunkGraph","runtime","runtimes","runtimeTemplate","runtimeRequirements","dep","selfModule","getParentModule","exportsInfo","getExportsInfo","merged","runtimeCondition","exportName","getUsed","Unused","condition","runtimeConditionExpression","insert","module","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/dependencies/PureExpressionDependency.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { UsageState } = require(\"../ExportsInfo\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst { filterRuntime, deepMergeRuntime } = require(\"../util/runtime\");\nconst NullDependency = require(\"./NullDependency\");\n\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n/** @typedef {import(\"../ChunkGraph\")} ChunkGraph */\n/** @typedef {import(\"../Dependency\")} Dependency */\n/** @typedef {import(\"../Dependency\").UpdateHashContext} UpdateHashContext */\n/** @typedef {import(\"../DependencyTemplate\").DependencyTemplateContext} DependencyTemplateContext */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../ModuleGraphConnection\").ConnectionState} ConnectionState */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectDeserializerContext} ObjectDeserializerContext */\n/** @typedef {import(\"../serialization/ObjectMiddleware\").ObjectSerializerContext} ObjectSerializerContext */\n/** @typedef {import(\"../util/Hash\")} Hash */\n\nclass PureExpressionDependency extends NullDependency {\n\t/**\n\t * @param {Range} range the source range\n\t */\n\tconstructor(range) {\n\t\tsuper();\n\t\tthis.range = range;\n\t\t/** @type {Set<string> | false} */\n\t\tthis.usedByExports = false;\n\t\tthis._hashUpdate = undefined;\n\t}\n\n\t/**\n\t * Update the hash\n\t * @param {Hash} hash hash to be updated\n\t * @param {UpdateHashContext} context context\n\t * @returns {void}\n\t */\n\tupdateHash(hash, context) {\n\t\tif (this._hashUpdate === undefined) {\n\t\t\tthis._hashUpdate = this.range + \"\";\n\t\t}\n\t\thash.update(this._hashUpdate);\n\t}\n\n\t/**\n\t * @param {ModuleGraph} moduleGraph the module graph\n\t * @returns {ConnectionState} how this dependency connects the module to referencing modules\n\t */\n\tgetModuleEvaluationSideEffectsState(moduleGraph) {\n\t\treturn false;\n\t}\n\n\t/**\n\t * @param {ObjectSerializerContext} context context\n\t */\n\tserialize(context) {\n\t\tconst { write } = context;\n\t\twrite(this.range);\n\t\twrite(this.usedByExports);\n\t\tsuper.serialize(context);\n\t}\n\n\t/**\n\t * @param {ObjectDeserializerContext} context context\n\t */\n\tdeserialize(context) {\n\t\tconst { read } = context;\n\t\tthis.range = read();\n\t\tthis.usedByExports = read();\n\t\tsuper.deserialize(context);\n\t}\n}\n\nmakeSerializable(\n\tPureExpressionDependency,\n\t\"webpack/lib/dependencies/PureExpressionDependency\"\n);\n\nPureExpressionDependency.Template = class PureExpressionDependencyTemplate extends (\n\tNullDependency.Template\n) {\n\t/**\n\t * @param {Dependency} dependency the dependency for which the template should be applied\n\t * @param {ReplaceSource} source the current replace source which can be modified\n\t * @param {DependencyTemplateContext} templateContext the context object\n\t * @returns {void}\n\t */\n\tapply(\n\t\tdependency,\n\t\tsource,\n\t\t{\n\t\t\tchunkGraph,\n\t\t\tmoduleGraph,\n\t\t\truntime,\n\t\t\truntimes,\n\t\t\truntimeTemplate,\n\t\t\truntimeRequirements\n\t\t}\n\t) {\n\t\tconst dep = /** @type {PureExpressionDependency} */ (dependency);\n\n\t\tconst usedByExports = dep.usedByExports;\n\t\tif (usedByExports !== false) {\n\t\t\tconst selfModule =\n\t\t\t\t/** @type {Module} */\n\t\t\t\t(moduleGraph.getParentModule(dep));\n\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(selfModule);\n\t\t\tconst merged = deepMergeRuntime(runtimes, runtime);\n\t\t\tconst runtimeCondition = filterRuntime(merged, runtime => {\n\t\t\t\tfor (const exportName of usedByExports) {\n\t\t\t\t\tif (exportsInfo.getUsed(exportName, runtime) !== UsageState.Unused) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (runtimeCondition === true) return;\n\t\t\tif (runtimeCondition !== false) {\n\t\t\t\tconst condition = runtimeTemplate.runtimeConditionExpression({\n\t\t\t\t\tchunkGraph,\n\t\t\t\t\truntime: merged,\n\t\t\t\t\truntimeCondition,\n\t\t\t\t\truntimeRequirements\n\t\t\t\t});\n\t\t\t\tsource.insert(\n\t\t\t\t\tdep.range[0],\n\t\t\t\t\t`(/* runtime-dependent pure expression or super */ ${condition} ? (`\n\t\t\t\t);\n\t\t\t\tsource.insert(dep.range[1], \") : null)\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsource.insert(\n\t\t\tdep.range[0],\n\t\t\t`(/* unused pure expression or super */ null && (`\n\t\t);\n\t\tsource.insert(dep.range[1], \"))\");\n\t}\n};\n\nmodule.exports = PureExpressionDependency;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}