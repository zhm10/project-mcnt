{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst ChunkPrefetchFunctionRuntimeModule = require(\"./ChunkPrefetchFunctionRuntimeModule\");\nconst ChunkPrefetchStartupRuntimeModule = require(\"./ChunkPrefetchStartupRuntimeModule\");\nconst ChunkPrefetchTriggerRuntimeModule = require(\"./ChunkPrefetchTriggerRuntimeModule\");\nconst ChunkPreloadTriggerRuntimeModule = require(\"./ChunkPreloadTriggerRuntimeModule\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../ChunkGroup\").RawChunkGroupOptions} RawChunkGroupOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\nclass ChunkPrefetchPreloadPlugin {\n  /**\n   * @param {Compiler} compiler the compiler\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"ChunkPrefetchPreloadPlugin\", compilation => {\n      compilation.hooks.additionalChunkRuntimeRequirements.tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set, {\n        chunkGraph\n      }) => {\n        if (chunkGraph.getNumberOfEntryModules(chunk) === 0) return;\n        const startupChildChunks = chunk.getChildrenOfTypeInOrder(chunkGraph, \"prefetchOrder\");\n        if (startupChildChunks) {\n          set.add(RuntimeGlobals.prefetchChunk);\n          set.add(RuntimeGlobals.onChunksLoaded);\n          compilation.addRuntimeModule(chunk, new ChunkPrefetchStartupRuntimeModule(startupChildChunks));\n        }\n      });\n      compilation.hooks.additionalTreeRuntimeRequirements.tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set, {\n        chunkGraph\n      }) => {\n        const chunkMap = chunk.getChildIdsByOrdersMap(chunkGraph);\n        if (chunkMap.prefetch) {\n          set.add(RuntimeGlobals.prefetchChunk);\n          compilation.addRuntimeModule(chunk, new ChunkPrefetchTriggerRuntimeModule(chunkMap.prefetch));\n        }\n        if (chunkMap.preload) {\n          set.add(RuntimeGlobals.preloadChunk);\n          compilation.addRuntimeModule(chunk, new ChunkPreloadTriggerRuntimeModule(chunkMap.preload));\n        }\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.prefetchChunk).tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new ChunkPrefetchFunctionRuntimeModule(\"prefetch\", RuntimeGlobals.prefetchChunk, RuntimeGlobals.prefetchChunkHandlers));\n        set.add(RuntimeGlobals.prefetchChunkHandlers);\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.preloadChunk).tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new ChunkPrefetchFunctionRuntimeModule(\"preload\", RuntimeGlobals.preloadChunk, RuntimeGlobals.preloadChunkHandlers));\n        set.add(RuntimeGlobals.preloadChunkHandlers);\n      });\n    });\n  }\n}\nmodule.exports = ChunkPrefetchPreloadPlugin;","map":{"version":3,"names":["RuntimeGlobals","require","ChunkPrefetchFunctionRuntimeModule","ChunkPrefetchStartupRuntimeModule","ChunkPrefetchTriggerRuntimeModule","ChunkPreloadTriggerRuntimeModule","ChunkPrefetchPreloadPlugin","apply","compiler","hooks","compilation","tap","additionalChunkRuntimeRequirements","chunk","set","chunkGraph","getNumberOfEntryModules","startupChildChunks","getChildrenOfTypeInOrder","add","prefetchChunk","onChunksLoaded","addRuntimeModule","additionalTreeRuntimeRequirements","chunkMap","getChildIdsByOrdersMap","prefetch","preload","preloadChunk","runtimeRequirementInTree","for","prefetchChunkHandlers","preloadChunkHandlers","module","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/prefetch/ChunkPrefetchPreloadPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst ChunkPrefetchFunctionRuntimeModule = require(\"./ChunkPrefetchFunctionRuntimeModule\");\nconst ChunkPrefetchStartupRuntimeModule = require(\"./ChunkPrefetchStartupRuntimeModule\");\nconst ChunkPrefetchTriggerRuntimeModule = require(\"./ChunkPrefetchTriggerRuntimeModule\");\nconst ChunkPreloadTriggerRuntimeModule = require(\"./ChunkPreloadTriggerRuntimeModule\");\n\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../ChunkGroup\").RawChunkGroupOptions} RawChunkGroupOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n\nclass ChunkPrefetchPreloadPlugin {\n\t/**\n\t * @param {Compiler} compiler the compiler\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ChunkPrefetchPreloadPlugin\",\n\t\t\tcompilation => {\n\t\t\t\tcompilation.hooks.additionalChunkRuntimeRequirements.tap(\n\t\t\t\t\t\"ChunkPrefetchPreloadPlugin\",\n\t\t\t\t\t(chunk, set, { chunkGraph }) => {\n\t\t\t\t\t\tif (chunkGraph.getNumberOfEntryModules(chunk) === 0) return;\n\t\t\t\t\t\tconst startupChildChunks = chunk.getChildrenOfTypeInOrder(\n\t\t\t\t\t\t\tchunkGraph,\n\t\t\t\t\t\t\t\"prefetchOrder\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (startupChildChunks) {\n\t\t\t\t\t\t\tset.add(RuntimeGlobals.prefetchChunk);\n\t\t\t\t\t\t\tset.add(RuntimeGlobals.onChunksLoaded);\n\t\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\tnew ChunkPrefetchStartupRuntimeModule(startupChildChunks)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcompilation.hooks.additionalTreeRuntimeRequirements.tap(\n\t\t\t\t\t\"ChunkPrefetchPreloadPlugin\",\n\t\t\t\t\t(chunk, set, { chunkGraph }) => {\n\t\t\t\t\t\tconst chunkMap = chunk.getChildIdsByOrdersMap(chunkGraph);\n\n\t\t\t\t\t\tif (chunkMap.prefetch) {\n\t\t\t\t\t\t\tset.add(RuntimeGlobals.prefetchChunk);\n\t\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\tnew ChunkPrefetchTriggerRuntimeModule(chunkMap.prefetch)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (chunkMap.preload) {\n\t\t\t\t\t\t\tset.add(RuntimeGlobals.preloadChunk);\n\t\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\tnew ChunkPreloadTriggerRuntimeModule(chunkMap.preload)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.prefetchChunk)\n\t\t\t\t\t.tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew ChunkPrefetchFunctionRuntimeModule(\n\t\t\t\t\t\t\t\t\"prefetch\",\n\t\t\t\t\t\t\t\tRuntimeGlobals.prefetchChunk,\n\t\t\t\t\t\t\t\tRuntimeGlobals.prefetchChunkHandlers\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tset.add(RuntimeGlobals.prefetchChunkHandlers);\n\t\t\t\t\t});\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.preloadChunk)\n\t\t\t\t\t.tap(\"ChunkPrefetchPreloadPlugin\", (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(\n\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\tnew ChunkPrefetchFunctionRuntimeModule(\n\t\t\t\t\t\t\t\t\"preload\",\n\t\t\t\t\t\t\t\tRuntimeGlobals.preloadChunk,\n\t\t\t\t\t\t\t\tRuntimeGlobals.preloadChunkHandlers\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tset.add(RuntimeGlobals.preloadChunkHandlers);\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ChunkPrefetchPreloadPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}