{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst InitFragment = require(\"../InitFragment\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../Generator\").GenerateContext} GenerateContext */\n\n/**\n * @extends {InitFragment<GenerateContext>}\n */\nclass AwaitDependenciesInitFragment extends InitFragment {\n  /**\n   * @param {Set<string>} promises the promises that should be awaited\n   */\n  constructor(promises) {\n    super(undefined, InitFragment.STAGE_ASYNC_DEPENDENCIES, 0, \"await-dependencies\");\n    this.promises = promises;\n  }\n\n  /**\n   * @param {AwaitDependenciesInitFragment} other other AwaitDependenciesInitFragment\n   * @returns {AwaitDependenciesInitFragment} AwaitDependenciesInitFragment\n   */\n  merge(other) {\n    const promises = new Set(other.promises);\n    for (const p of this.promises) {\n      promises.add(p);\n    }\n    return new AwaitDependenciesInitFragment(promises);\n  }\n\n  /**\n   * @param {GenerateContext} context context\n   * @returns {string | Source | undefined} the source code that will be included as initialization code\n   */\n  getContent({\n    runtimeRequirements\n  }) {\n    runtimeRequirements.add(RuntimeGlobals.module);\n    const promises = this.promises;\n    if (promises.size === 0) {\n      return \"\";\n    }\n    if (promises.size === 1) {\n      for (const p of promises) {\n        return Template.asString([`var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([${p}]);`, `${p} = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];`, \"\"]);\n      }\n    }\n    const sepPromises = Array.from(promises).join(\", \");\n    // TODO check if destructuring is supported\n    return Template.asString([`var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([${sepPromises}]);`, `([${sepPromises}] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);`, \"\"]);\n  }\n}\nmodule.exports = AwaitDependenciesInitFragment;","map":{"version":3,"names":["InitFragment","require","RuntimeGlobals","Template","AwaitDependenciesInitFragment","constructor","promises","undefined","STAGE_ASYNC_DEPENDENCIES","merge","other","Set","p","add","getContent","runtimeRequirements","module","size","asString","sepPromises","Array","from","join","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/async-modules/AwaitDependenciesInitFragment.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst InitFragment = require(\"../InitFragment\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst Template = require(\"../Template\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../Generator\").GenerateContext} GenerateContext */\n\n/**\n * @extends {InitFragment<GenerateContext>}\n */\nclass AwaitDependenciesInitFragment extends InitFragment {\n\t/**\n\t * @param {Set<string>} promises the promises that should be awaited\n\t */\n\tconstructor(promises) {\n\t\tsuper(\n\t\t\tundefined,\n\t\t\tInitFragment.STAGE_ASYNC_DEPENDENCIES,\n\t\t\t0,\n\t\t\t\"await-dependencies\"\n\t\t);\n\t\tthis.promises = promises;\n\t}\n\n\t/**\n\t * @param {AwaitDependenciesInitFragment} other other AwaitDependenciesInitFragment\n\t * @returns {AwaitDependenciesInitFragment} AwaitDependenciesInitFragment\n\t */\n\tmerge(other) {\n\t\tconst promises = new Set(other.promises);\n\t\tfor (const p of this.promises) {\n\t\t\tpromises.add(p);\n\t\t}\n\t\treturn new AwaitDependenciesInitFragment(promises);\n\t}\n\n\t/**\n\t * @param {GenerateContext} context context\n\t * @returns {string | Source | undefined} the source code that will be included as initialization code\n\t */\n\tgetContent({ runtimeRequirements }) {\n\t\truntimeRequirements.add(RuntimeGlobals.module);\n\t\tconst promises = this.promises;\n\t\tif (promises.size === 0) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (promises.size === 1) {\n\t\t\tfor (const p of promises) {\n\t\t\t\treturn Template.asString([\n\t\t\t\t\t`var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([${p}]);`,\n\t\t\t\t\t`${p} = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];`,\n\t\t\t\t\t\"\"\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t\tconst sepPromises = Array.from(promises).join(\", \");\n\t\t// TODO check if destructuring is supported\n\t\treturn Template.asString([\n\t\t\t`var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([${sepPromises}]);`,\n\t\t\t`([${sepPromises}] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);`,\n\t\t\t\"\"\n\t\t]);\n\t}\n}\n\nmodule.exports = AwaitDependenciesInitFragment;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC/C,MAAMC,cAAc,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AACnD,MAAME,QAAQ,GAAGF,OAAO,CAAC,aAAa,CAAC;;AAEvC;AACA;;AAEA;AACA;AACA;AACA,MAAMG,6BAA6B,SAASJ,YAAY,CAAC;EACxD;AACD;AACA;EACCK,WAAWA,CAACC,QAAQ,EAAE;IACrB,KAAK,CACJC,SAAS,EACTP,YAAY,CAACQ,wBAAwB,EACrC,CAAC,EACD,oBACD,CAAC;IACD,IAAI,CAACF,QAAQ,GAAGA,QAAQ;EACzB;;EAEA;AACD;AACA;AACA;EACCG,KAAKA,CAACC,KAAK,EAAE;IACZ,MAAMJ,QAAQ,GAAG,IAAIK,GAAG,CAACD,KAAK,CAACJ,QAAQ,CAAC;IACxC,KAAK,MAAMM,CAAC,IAAI,IAAI,CAACN,QAAQ,EAAE;MAC9BA,QAAQ,CAACO,GAAG,CAACD,CAAC,CAAC;IAChB;IACA,OAAO,IAAIR,6BAA6B,CAACE,QAAQ,CAAC;EACnD;;EAEA;AACD;AACA;AACA;EACCQ,UAAUA,CAAC;IAAEC;EAAoB,CAAC,EAAE;IACnCA,mBAAmB,CAACF,GAAG,CAACX,cAAc,CAACc,MAAM,CAAC;IAC9C,MAAMV,QAAQ,GAAG,IAAI,CAACA,QAAQ;IAC9B,IAAIA,QAAQ,CAACW,IAAI,KAAK,CAAC,EAAE;MACxB,OAAO,EAAE;IACV;IACA,IAAIX,QAAQ,CAACW,IAAI,KAAK,CAAC,EAAE;MACxB,KAAK,MAAML,CAAC,IAAIN,QAAQ,EAAE;QACzB,OAAOH,QAAQ,CAACe,QAAQ,CAAC,CACxB,+EAA+EN,CAAC,KAAK,EACrF,GAAGA,CAAC,0HAA0H,EAC9H,EAAE,CACF,CAAC;MACH;IACD;IACA,MAAMO,WAAW,GAAGC,KAAK,CAACC,IAAI,CAACf,QAAQ,CAAC,CAACgB,IAAI,CAAC,IAAI,CAAC;IACnD;IACA,OAAOnB,QAAQ,CAACe,QAAQ,CAAC,CACxB,+EAA+EC,WAAW,KAAK,EAC/F,KAAKA,WAAW,uHAAuH,EACvI,EAAE,CACF,CAAC;EACH;AACD;AAEAH,MAAM,CAACO,OAAO,GAAGnB,6BAA6B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}