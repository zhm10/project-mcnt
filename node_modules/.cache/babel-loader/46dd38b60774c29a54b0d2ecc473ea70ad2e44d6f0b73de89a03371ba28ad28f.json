{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n  ConcatSource\n} = require(\"webpack-sources\");\nconst {\n  UsageState\n} = require(\"../ExportsInfo\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst {\n  getEntryRuntime\n} = require(\"../util/runtime\");\nconst AbstractLibraryPlugin = require(\"./AbstractLibraryPlugin\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryOptions} LibraryOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryType} LibraryType */\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").StartupRenderContext} StartupRenderContext */\n/** @template T @typedef {import(\"./AbstractLibraryPlugin\").LibraryContext<T>} LibraryContext<T> */\n\n/**\n * @typedef {Object} ExportPropertyLibraryPluginParsed\n * @property {string | string[]} export\n */\n\n/**\n * @typedef {Object} ExportPropertyLibraryPluginOptions\n * @property {LibraryType} type\n * @property {boolean} nsObjectUsed the namespace object is used\n */\n/**\n * @typedef {ExportPropertyLibraryPluginParsed} T\n * @extends {AbstractLibraryPlugin<ExportPropertyLibraryPluginParsed>}\n */\nclass ExportPropertyLibraryPlugin extends AbstractLibraryPlugin {\n  /**\n   * @param {ExportPropertyLibraryPluginOptions} options options\n   */\n  constructor({\n    type,\n    nsObjectUsed\n  }) {\n    super({\n      pluginName: \"ExportPropertyLibraryPlugin\",\n      type\n    });\n    this.nsObjectUsed = nsObjectUsed;\n  }\n\n  /**\n   * @param {LibraryOptions} library normalized library option\n   * @returns {T | false} preprocess as needed by overriding\n   */\n  parseOptions(library) {\n    return {\n      export: library.export\n    };\n  }\n\n  /**\n   * @param {Module} module the exporting entry module\n   * @param {string} entryName the name of the entrypoint\n   * @param {LibraryContext<T>} libraryContext context\n   * @returns {void}\n   */\n  finishEntryModule(module, entryName, {\n    options,\n    compilation,\n    compilation: {\n      moduleGraph\n    }\n  }) {\n    const runtime = getEntryRuntime(compilation, entryName);\n    if (options.export) {\n      const exportsInfo = moduleGraph.getExportInfo(module, Array.isArray(options.export) ? options.export[0] : options.export);\n      exportsInfo.setUsed(UsageState.Used, runtime);\n      exportsInfo.canMangleUse = false;\n    } else {\n      const exportsInfo = moduleGraph.getExportsInfo(module);\n      if (this.nsObjectUsed) {\n        exportsInfo.setUsedInUnknownWay(runtime);\n      } else {\n        exportsInfo.setAllKnownExportsUsed(runtime);\n      }\n    }\n    moduleGraph.addExtraReason(module, \"used as library export\");\n  }\n\n  /**\n   * @param {Chunk} chunk the chunk\n   * @param {Set<string>} set runtime requirements\n   * @param {LibraryContext<T>} libraryContext context\n   * @returns {void}\n   */\n  runtimeRequirements(chunk, set, libraryContext) {}\n\n  /**\n   * @param {Source} source source\n   * @param {Module} module module\n   * @param {StartupRenderContext} renderContext render context\n   * @param {LibraryContext<T>} libraryContext context\n   * @returns {Source} source with library export\n   */\n  renderStartup(source, module, renderContext, {\n    options\n  }) {\n    if (!options.export) return source;\n    const postfix = `${RuntimeGlobals.exports} = ${RuntimeGlobals.exports}${propertyAccess(Array.isArray(options.export) ? options.export : [options.export])};\\n`;\n    return new ConcatSource(source, postfix);\n  }\n}\nmodule.exports = ExportPropertyLibraryPlugin;","map":{"version":3,"names":["ConcatSource","require","UsageState","RuntimeGlobals","propertyAccess","getEntryRuntime","AbstractLibraryPlugin","ExportPropertyLibraryPlugin","constructor","type","nsObjectUsed","pluginName","parseOptions","library","export","finishEntryModule","module","entryName","options","compilation","moduleGraph","runtime","exportsInfo","getExportInfo","Array","isArray","setUsed","Used","canMangleUse","getExportsInfo","setUsedInUnknownWay","setAllKnownExportsUsed","addExtraReason","runtimeRequirements","chunk","set","libraryContext","renderStartup","source","renderContext","postfix","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/library/ExportPropertyLibraryPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst { ConcatSource } = require(\"webpack-sources\");\nconst { UsageState } = require(\"../ExportsInfo\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst { getEntryRuntime } = require(\"../util/runtime\");\nconst AbstractLibraryPlugin = require(\"./AbstractLibraryPlugin\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryOptions} LibraryOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").LibraryType} LibraryType */\n/** @typedef {import(\"../Chunk\")} Chunk */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../javascript/JavascriptModulesPlugin\").StartupRenderContext} StartupRenderContext */\n/** @template T @typedef {import(\"./AbstractLibraryPlugin\").LibraryContext<T>} LibraryContext<T> */\n\n/**\n * @typedef {Object} ExportPropertyLibraryPluginParsed\n * @property {string | string[]} export\n */\n\n/**\n * @typedef {Object} ExportPropertyLibraryPluginOptions\n * @property {LibraryType} type\n * @property {boolean} nsObjectUsed the namespace object is used\n */\n/**\n * @typedef {ExportPropertyLibraryPluginParsed} T\n * @extends {AbstractLibraryPlugin<ExportPropertyLibraryPluginParsed>}\n */\nclass ExportPropertyLibraryPlugin extends AbstractLibraryPlugin {\n\t/**\n\t * @param {ExportPropertyLibraryPluginOptions} options options\n\t */\n\tconstructor({ type, nsObjectUsed }) {\n\t\tsuper({\n\t\t\tpluginName: \"ExportPropertyLibraryPlugin\",\n\t\t\ttype\n\t\t});\n\t\tthis.nsObjectUsed = nsObjectUsed;\n\t}\n\n\t/**\n\t * @param {LibraryOptions} library normalized library option\n\t * @returns {T | false} preprocess as needed by overriding\n\t */\n\tparseOptions(library) {\n\t\treturn {\n\t\t\texport: library.export\n\t\t};\n\t}\n\n\t/**\n\t * @param {Module} module the exporting entry module\n\t * @param {string} entryName the name of the entrypoint\n\t * @param {LibraryContext<T>} libraryContext context\n\t * @returns {void}\n\t */\n\tfinishEntryModule(\n\t\tmodule,\n\t\tentryName,\n\t\t{ options, compilation, compilation: { moduleGraph } }\n\t) {\n\t\tconst runtime = getEntryRuntime(compilation, entryName);\n\t\tif (options.export) {\n\t\t\tconst exportsInfo = moduleGraph.getExportInfo(\n\t\t\t\tmodule,\n\t\t\t\tArray.isArray(options.export) ? options.export[0] : options.export\n\t\t\t);\n\t\t\texportsInfo.setUsed(UsageState.Used, runtime);\n\t\t\texportsInfo.canMangleUse = false;\n\t\t} else {\n\t\t\tconst exportsInfo = moduleGraph.getExportsInfo(module);\n\t\t\tif (this.nsObjectUsed) {\n\t\t\t\texportsInfo.setUsedInUnknownWay(runtime);\n\t\t\t} else {\n\t\t\t\texportsInfo.setAllKnownExportsUsed(runtime);\n\t\t\t}\n\t\t}\n\t\tmoduleGraph.addExtraReason(module, \"used as library export\");\n\t}\n\n\t/**\n\t * @param {Chunk} chunk the chunk\n\t * @param {Set<string>} set runtime requirements\n\t * @param {LibraryContext<T>} libraryContext context\n\t * @returns {void}\n\t */\n\truntimeRequirements(chunk, set, libraryContext) {}\n\n\t/**\n\t * @param {Source} source source\n\t * @param {Module} module module\n\t * @param {StartupRenderContext} renderContext render context\n\t * @param {LibraryContext<T>} libraryContext context\n\t * @returns {Source} source with library export\n\t */\n\trenderStartup(source, module, renderContext, { options }) {\n\t\tif (!options.export) return source;\n\t\tconst postfix = `${RuntimeGlobals.exports} = ${\n\t\t\tRuntimeGlobals.exports\n\t\t}${propertyAccess(\n\t\t\tArray.isArray(options.export) ? options.export : [options.export]\n\t\t)};\\n`;\n\t\treturn new ConcatSource(source, postfix);\n\t}\n}\n\nmodule.exports = ExportPropertyLibraryPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}