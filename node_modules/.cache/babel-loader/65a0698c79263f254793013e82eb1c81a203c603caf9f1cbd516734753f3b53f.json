{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"./ModuleTypeConstants\");\nconst NodeStuffInWebError = require(\"./NodeStuffInWebError\");\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\nconst CachedConstDependency = require(\"./dependencies/CachedConstDependency\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ExternalModuleDependency = require(\"./dependencies/ExternalModuleDependency\");\nconst {\n  evaluateToString,\n  expressionIsUnsupported\n} = require(\"./javascript/JavascriptParserHelpers\");\nconst {\n  relative\n} = require(\"./util/fs\");\nconst {\n  parseResource\n} = require(\"./util/identifier\");\n\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n/** @typedef {import(\"../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../declarations/WebpackOptions\").NodeOptions} NodeOptions */\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./Dependency\")} Dependency */\n/** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"./DependencyTemplates\")} DependencyTemplates */\n/** @typedef {import(\"./NormalModule\")} NormalModule */\n/** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n/** @typedef {import(\"./javascript/JavascriptParser\").Range} Range */\n/** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n\nconst PLUGIN_NAME = \"NodeStuffPlugin\";\nclass NodeStuffPlugin {\n  /**\n   * @param {NodeOptions} options options\n   */\n  constructor(options) {\n    this.options = options;\n  }\n\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    const options = this.options;\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyTemplates.set(ExternalModuleDependency, new ExternalModuleDependency.Template());\n\n      /**\n       * @param {JavascriptParser} parser the parser\n       * @param {JavascriptParserOptions} parserOptions options\n       * @returns {void}\n       */\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.node === false) return;\n        let localOptions = options;\n        if (parserOptions.node) {\n          localOptions = {\n            ...localOptions,\n            ...parserOptions.node\n          };\n        }\n        if (localOptions.global !== false) {\n          const withWarning = localOptions.global === \"warn\";\n          parser.hooks.expression.for(\"global\").tap(PLUGIN_NAME, expr => {\n            const dep = new ConstDependency(RuntimeGlobals.global, /** @type {Range} */expr.range, [RuntimeGlobals.global]);\n            dep.loc = /** @type {DependencyLocation} */expr.loc;\n            parser.state.module.addPresentationalDependency(dep);\n\n            // TODO webpack 6 remove\n            if (withWarning) {\n              parser.state.module.addWarning(new NodeStuffInWebError(dep.loc, \"global\", \"The global namespace object is a Node.js feature and isn't available in browsers.\"));\n            }\n          });\n          parser.hooks.rename.for(\"global\").tap(PLUGIN_NAME, expr => {\n            const dep = new ConstDependency(RuntimeGlobals.global, /** @type {Range} */expr.range, [RuntimeGlobals.global]);\n            dep.loc = /** @type {DependencyLocation} */expr.loc;\n            parser.state.module.addPresentationalDependency(dep);\n            return false;\n          });\n        }\n\n        /**\n         * @param {string} expressionName expression name\n         * @param {(module: NormalModule) => string} fn function\n         * @param {string=} warning warning\n         * @returns {void}\n         */\n        const setModuleConstant = (expressionName, fn, warning) => {\n          parser.hooks.expression.for(expressionName).tap(PLUGIN_NAME, expr => {\n            const dep = new CachedConstDependency(JSON.stringify(fn(parser.state.module)), /** @type {Range} */expr.range, expressionName);\n            dep.loc = /** @type {DependencyLocation} */expr.loc;\n            parser.state.module.addPresentationalDependency(dep);\n\n            // TODO webpack 6 remove\n            if (warning) {\n              parser.state.module.addWarning(new NodeStuffInWebError(dep.loc, expressionName, warning));\n            }\n            return true;\n          });\n        };\n\n        /**\n         * @param {string} expressionName expression name\n         * @param {(value: string) => string} fn function\n         * @returns {void}\n         */\n        const setUrlModuleConstant = (expressionName, fn) => {\n          parser.hooks.expression.for(expressionName).tap(PLUGIN_NAME, expr => {\n            const dep = new ExternalModuleDependency(\"url\", [{\n              name: \"fileURLToPath\",\n              value: \"__webpack_fileURLToPath__\"\n            }], undefined, fn(\"__webpack_fileURLToPath__\"), /** @type {Range} */expr.range, expressionName);\n            dep.loc = /** @type {DependencyLocation} */expr.loc;\n            parser.state.module.addPresentationalDependency(dep);\n            return true;\n          });\n        };\n\n        /**\n         * @param {string} expressionName expression name\n         * @param {string} value value\n         * @param {string=} warning warning\n         * @returns {void}\n         */\n        const setConstant = (expressionName, value, warning) => setModuleConstant(expressionName, () => value, warning);\n        const context = compiler.context;\n        if (localOptions.__filename) {\n          switch (localOptions.__filename) {\n            case \"mock\":\n              setConstant(\"__filename\", \"/index.js\");\n              break;\n            case \"warn-mock\":\n              setConstant(\"__filename\", \"/index.js\", \"__filename is a Node.js feature and isn't available in browsers.\");\n              break;\n            case \"node-module\":\n              setUrlModuleConstant(\"__filename\", functionName => `${functionName}(import.meta.url)`);\n              break;\n            case true:\n              setModuleConstant(\"__filename\", module => relative( /** @type {InputFileSystem} */compiler.inputFileSystem, context, module.resource));\n              break;\n          }\n          parser.hooks.evaluateIdentifier.for(\"__filename\").tap(PLUGIN_NAME, expr => {\n            if (!parser.state.module) return;\n            const resource = parseResource(parser.state.module.resource);\n            return evaluateToString(resource.path)(expr);\n          });\n        }\n        if (localOptions.__dirname) {\n          switch (localOptions.__dirname) {\n            case \"mock\":\n              setConstant(\"__dirname\", \"/\");\n              break;\n            case \"warn-mock\":\n              setConstant(\"__dirname\", \"/\", \"__dirname is a Node.js feature and isn't available in browsers.\");\n              break;\n            case \"node-module\":\n              setUrlModuleConstant(\"__dirname\", functionName => `${functionName}(import.meta.url + \"/..\").slice(0, -1)`);\n              break;\n            case true:\n              setModuleConstant(\"__dirname\", module => relative( /** @type {InputFileSystem} */compiler.inputFileSystem, context, /** @type {string} */module.context));\n              break;\n          }\n          parser.hooks.evaluateIdentifier.for(\"__dirname\").tap(PLUGIN_NAME, expr => {\n            if (!parser.state.module) return;\n            return evaluateToString( /** @type {string} */parser.state.module.context)(expr);\n          });\n        }\n        parser.hooks.expression.for(\"require.extensions\").tap(PLUGIN_NAME, expressionIsUnsupported(parser, \"require.extensions is not supported by webpack. Use a loader instead.\"));\n      };\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n    });\n  }\n}\nmodule.exports = NodeStuffPlugin;","map":{"version":3,"names":["JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","require","NodeStuffInWebError","RuntimeGlobals","CachedConstDependency","ConstDependency","ExternalModuleDependency","evaluateToString","expressionIsUnsupported","relative","parseResource","PLUGIN_NAME","NodeStuffPlugin","constructor","options","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyTemplates","set","Template","handler","parser","parserOptions","node","localOptions","global","withWarning","expression","for","expr","dep","range","loc","state","module","addPresentationalDependency","addWarning","rename","setModuleConstant","expressionName","fn","warning","JSON","stringify","setUrlModuleConstant","name","value","undefined","setConstant","context","__filename","functionName","inputFileSystem","resource","evaluateIdentifier","path","__dirname","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/NodeStuffPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"./ModuleTypeConstants\");\nconst NodeStuffInWebError = require(\"./NodeStuffInWebError\");\nconst RuntimeGlobals = require(\"./RuntimeGlobals\");\nconst CachedConstDependency = require(\"./dependencies/CachedConstDependency\");\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\nconst ExternalModuleDependency = require(\"./dependencies/ExternalModuleDependency\");\nconst {\n\tevaluateToString,\n\texpressionIsUnsupported\n} = require(\"./javascript/JavascriptParserHelpers\");\nconst { relative } = require(\"./util/fs\");\nconst { parseResource } = require(\"./util/identifier\");\n\n/** @typedef {import(\"webpack-sources\").ReplaceSource} ReplaceSource */\n/** @typedef {import(\"../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../declarations/WebpackOptions\").NodeOptions} NodeOptions */\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./Dependency\")} Dependency */\n/** @typedef {import(\"./Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"./DependencyTemplates\")} DependencyTemplates */\n/** @typedef {import(\"./NormalModule\")} NormalModule */\n/** @typedef {import(\"./RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"./javascript/JavascriptParser\")} JavascriptParser */\n/** @typedef {import(\"./javascript/JavascriptParser\").Range} Range */\n/** @typedef {import(\"./util/fs\").InputFileSystem} InputFileSystem */\n\nconst PLUGIN_NAME = \"NodeStuffPlugin\";\n\nclass NodeStuffPlugin {\n\t/**\n\t * @param {NodeOptions} options options\n\t */\n\tconstructor(options) {\n\t\tthis.options = options;\n\t}\n\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tconst options = this.options;\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyTemplates.set(\n\t\t\t\t\tExternalModuleDependency,\n\t\t\t\t\tnew ExternalModuleDependency.Template()\n\t\t\t\t);\n\n\t\t\t\t/**\n\t\t\t\t * @param {JavascriptParser} parser the parser\n\t\t\t\t * @param {JavascriptParserOptions} parserOptions options\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (parserOptions.node === false) return;\n\n\t\t\t\t\tlet localOptions = options;\n\t\t\t\t\tif (parserOptions.node) {\n\t\t\t\t\t\tlocalOptions = { ...localOptions, ...parserOptions.node };\n\t\t\t\t\t}\n\n\t\t\t\t\tif (localOptions.global !== false) {\n\t\t\t\t\t\tconst withWarning = localOptions.global === \"warn\";\n\t\t\t\t\t\tparser.hooks.expression.for(\"global\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tRuntimeGlobals.global,\n\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t\t[RuntimeGlobals.global]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\n\t\t\t\t\t\t\t// TODO webpack 6 remove\n\t\t\t\t\t\t\tif (withWarning) {\n\t\t\t\t\t\t\t\tparser.state.module.addWarning(\n\t\t\t\t\t\t\t\t\tnew NodeStuffInWebError(\n\t\t\t\t\t\t\t\t\t\tdep.loc,\n\t\t\t\t\t\t\t\t\t\t\"global\",\n\t\t\t\t\t\t\t\t\t\t\"The global namespace object is a Node.js feature and isn't available in browsers.\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tparser.hooks.rename.for(\"global\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\tRuntimeGlobals.global,\n\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t\t[RuntimeGlobals.global]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string} expressionName expression name\n\t\t\t\t\t * @param {(module: NormalModule) => string} fn function\n\t\t\t\t\t * @param {string=} warning warning\n\t\t\t\t\t * @returns {void}\n\t\t\t\t\t */\n\t\t\t\t\tconst setModuleConstant = (expressionName, fn, warning) => {\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(expressionName)\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t\tconst dep = new CachedConstDependency(\n\t\t\t\t\t\t\t\t\tJSON.stringify(fn(parser.state.module)),\n\t\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t\t\texpressionName\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\n\t\t\t\t\t\t\t\t// TODO webpack 6 remove\n\t\t\t\t\t\t\t\tif (warning) {\n\t\t\t\t\t\t\t\t\tparser.state.module.addWarning(\n\t\t\t\t\t\t\t\t\t\tnew NodeStuffInWebError(dep.loc, expressionName, warning)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string} expressionName expression name\n\t\t\t\t\t * @param {(value: string) => string} fn function\n\t\t\t\t\t * @returns {void}\n\t\t\t\t\t */\n\t\t\t\t\tconst setUrlModuleConstant = (expressionName, fn) => {\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(expressionName)\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t\tconst dep = new ExternalModuleDependency(\n\t\t\t\t\t\t\t\t\t\"url\",\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"fileURLToPath\",\n\t\t\t\t\t\t\t\t\t\t\tvalue: \"__webpack_fileURLToPath__\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\t\tfn(\"__webpack_fileURLToPath__\"),\n\t\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t\t\texpressionName\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string} expressionName expression name\n\t\t\t\t\t * @param {string} value value\n\t\t\t\t\t * @param {string=} warning warning\n\t\t\t\t\t * @returns {void}\n\t\t\t\t\t */\n\t\t\t\t\tconst setConstant = (expressionName, value, warning) =>\n\t\t\t\t\t\tsetModuleConstant(expressionName, () => value, warning);\n\n\t\t\t\t\tconst context = compiler.context;\n\t\t\t\t\tif (localOptions.__filename) {\n\t\t\t\t\t\tswitch (localOptions.__filename) {\n\t\t\t\t\t\t\tcase \"mock\":\n\t\t\t\t\t\t\t\tsetConstant(\"__filename\", \"/index.js\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"warn-mock\":\n\t\t\t\t\t\t\t\tsetConstant(\n\t\t\t\t\t\t\t\t\t\"__filename\",\n\t\t\t\t\t\t\t\t\t\"/index.js\",\n\t\t\t\t\t\t\t\t\t\"__filename is a Node.js feature and isn't available in browsers.\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"node-module\":\n\t\t\t\t\t\t\t\tsetUrlModuleConstant(\n\t\t\t\t\t\t\t\t\t\"__filename\",\n\t\t\t\t\t\t\t\t\tfunctionName => `${functionName}(import.meta.url)`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase true:\n\t\t\t\t\t\t\t\tsetModuleConstant(\"__filename\", module =>\n\t\t\t\t\t\t\t\t\trelative(\n\t\t\t\t\t\t\t\t\t\t/** @type {InputFileSystem} */ (compiler.inputFileSystem),\n\t\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\t\tmodule.resource\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t\t.for(\"__filename\")\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t\tif (!parser.state.module) return;\n\t\t\t\t\t\t\t\tconst resource = parseResource(parser.state.module.resource);\n\t\t\t\t\t\t\t\treturn evaluateToString(resource.path)(expr);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (localOptions.__dirname) {\n\t\t\t\t\t\tswitch (localOptions.__dirname) {\n\t\t\t\t\t\t\tcase \"mock\":\n\t\t\t\t\t\t\t\tsetConstant(\"__dirname\", \"/\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"warn-mock\":\n\t\t\t\t\t\t\t\tsetConstant(\n\t\t\t\t\t\t\t\t\t\"__dirname\",\n\t\t\t\t\t\t\t\t\t\"/\",\n\t\t\t\t\t\t\t\t\t\"__dirname is a Node.js feature and isn't available in browsers.\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"node-module\":\n\t\t\t\t\t\t\t\tsetUrlModuleConstant(\n\t\t\t\t\t\t\t\t\t\"__dirname\",\n\t\t\t\t\t\t\t\t\tfunctionName =>\n\t\t\t\t\t\t\t\t\t\t`${functionName}(import.meta.url + \"/..\").slice(0, -1)`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase true:\n\t\t\t\t\t\t\t\tsetModuleConstant(\"__dirname\", module =>\n\t\t\t\t\t\t\t\t\trelative(\n\t\t\t\t\t\t\t\t\t\t/** @type {InputFileSystem} */ (compiler.inputFileSystem),\n\t\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\t\t/** @type {string} */ (module.context)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t\t.for(\"__dirname\")\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\t\tif (!parser.state.module) return;\n\t\t\t\t\t\t\t\treturn evaluateToString(\n\t\t\t\t\t\t\t\t\t/** @type {string} */ (parser.state.module.context)\n\t\t\t\t\t\t\t\t)(expr);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"require.extensions\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\texpressionIsUnsupported(\n\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\"require.extensions is not supported by webpack. Use a loader instead.\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = NodeStuffPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}