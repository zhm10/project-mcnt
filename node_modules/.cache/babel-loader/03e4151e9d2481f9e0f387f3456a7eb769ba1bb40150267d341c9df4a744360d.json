{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra and Zackary Jackson @ScriptedAlchemy\n*/\n\n\"use strict\";\n\nconst WebpackError = require(\"../WebpackError\");\nconst {\n  parseOptions\n} = require(\"../container/options\");\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\nconst ProvideForSharedDependency = require(\"./ProvideForSharedDependency\");\nconst ProvideSharedDependency = require(\"./ProvideSharedDependency\");\nconst ProvideSharedModuleFactory = require(\"./ProvideSharedModuleFactory\");\n\n/** @typedef {import(\"../../declarations/plugins/sharing/ProvideSharedPlugin\").ProvideSharedPluginOptions} ProvideSharedPluginOptions */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../NormalModuleFactory\").NormalModuleCreateData} NormalModuleCreateData */\n\nconst validate = createSchemaValidation(require(\"../../schemas/plugins/sharing/ProvideSharedPlugin.check.js\"), () => require(\"../../schemas/plugins/sharing/ProvideSharedPlugin.json\"), {\n  name: \"Provide Shared Plugin\",\n  baseDataPath: \"options\"\n});\n\n/**\n * @typedef {Object} ProvideOptions\n * @property {string} shareKey\n * @property {string} shareScope\n * @property {string | undefined | false} version\n * @property {boolean} eager\n */\n\n/** @typedef {Map<string, { config: ProvideOptions, version: string | undefined | false }>} ResolvedProvideMap */\n\nclass ProvideSharedPlugin {\n  /**\n   * @param {ProvideSharedPluginOptions} options options\n   */\n  constructor(options) {\n    validate(options);\n    this._provides = /** @type {[string, ProvideOptions][]} */\n    parseOptions(options.provides, item => {\n      if (Array.isArray(item)) throw new Error(\"Unexpected array of provides\");\n      /** @type {ProvideOptions} */\n      const result = {\n        shareKey: item,\n        version: undefined,\n        shareScope: options.shareScope || \"default\",\n        eager: false\n      };\n      return result;\n    }, item => ({\n      shareKey: item.shareKey,\n      version: item.version,\n      shareScope: item.shareScope || options.shareScope || \"default\",\n      eager: !!item.eager\n    }));\n    this._provides.sort(([a], [b]) => {\n      if (a < b) return -1;\n      if (b < a) return 1;\n      return 0;\n    });\n  }\n\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    /** @type {WeakMap<Compilation, ResolvedProvideMap>} */\n    const compilationData = new WeakMap();\n    compiler.hooks.compilation.tap(\"ProvideSharedPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      /** @type {ResolvedProvideMap} */\n      const resolvedProvideMap = new Map();\n      /** @type {Map<string, ProvideOptions>} */\n      const matchProvides = new Map();\n      /** @type {Map<string, ProvideOptions>} */\n      const prefixMatchProvides = new Map();\n      for (const [request, config] of this._provides) {\n        if (/^(\\/|[A-Za-z]:\\\\|\\\\\\\\|\\.\\.?(\\/|$))/.test(request)) {\n          // relative request\n          resolvedProvideMap.set(request, {\n            config,\n            version: config.version\n          });\n        } else if (/^(\\/|[A-Za-z]:\\\\|\\\\\\\\)/.test(request)) {\n          // absolute path\n          resolvedProvideMap.set(request, {\n            config,\n            version: config.version\n          });\n        } else if (request.endsWith(\"/\")) {\n          // module request prefix\n          prefixMatchProvides.set(request, config);\n        } else {\n          // module request\n          matchProvides.set(request, config);\n        }\n      }\n      compilationData.set(compilation, resolvedProvideMap);\n      /**\n       * @param {string} key key\n       * @param {ProvideOptions} config config\n       * @param {NormalModuleCreateData[\"resource\"]} resource resource\n       * @param {NormalModuleCreateData[\"resourceResolveData\"]} resourceResolveData resource resolve data\n       */\n      const provideSharedModule = (key, config, resource, resourceResolveData) => {\n        let version = config.version;\n        if (version === undefined) {\n          let details = \"\";\n          if (!resourceResolveData) {\n            details = `No resolve data provided from resolver.`;\n          } else {\n            const descriptionFileData = resourceResolveData.descriptionFileData;\n            if (!descriptionFileData) {\n              details = \"No description file (usually package.json) found. Add description file with name and version, or manually specify version in shared config.\";\n            } else if (!descriptionFileData.version) {\n              details = `No version in description file (usually package.json). Add version to description file ${resourceResolveData.descriptionFilePath}, or manually specify version in shared config.`;\n            } else {\n              version = descriptionFileData.version;\n            }\n          }\n          if (!version) {\n            const error = new WebpackError(`No version specified and unable to automatically determine one. ${details}`);\n            error.file = `shared module ${key} -> ${resource}`;\n            compilation.warnings.push(error);\n          }\n        }\n        resolvedProvideMap.set(resource, {\n          config,\n          version\n        });\n      };\n      normalModuleFactory.hooks.module.tap(\"ProvideSharedPlugin\", (module, {\n        resource,\n        resourceResolveData\n      }, resolveData) => {\n        if (resolvedProvideMap.has( /** @type {string} */resource)) {\n          return module;\n        }\n        const {\n          request\n        } = resolveData;\n        {\n          const config = matchProvides.get(request);\n          if (config !== undefined) {\n            provideSharedModule(request, config, /** @type {string} */resource, resourceResolveData);\n            resolveData.cacheable = false;\n          }\n        }\n        for (const [prefix, config] of prefixMatchProvides) {\n          if (request.startsWith(prefix)) {\n            const remainder = request.slice(prefix.length);\n            provideSharedModule( /** @type {string} */resource, {\n              ...config,\n              shareKey: config.shareKey + remainder\n            }, /** @type {string} */resource, resourceResolveData);\n            resolveData.cacheable = false;\n          }\n        }\n        return module;\n      });\n    });\n    compiler.hooks.finishMake.tapPromise(\"ProvideSharedPlugin\", compilation => {\n      const resolvedProvideMap = compilationData.get(compilation);\n      if (!resolvedProvideMap) return Promise.resolve();\n      return Promise.all(Array.from(resolvedProvideMap, ([resource, {\n        config,\n        version\n      }]) => new Promise((resolve, reject) => {\n        compilation.addInclude(compiler.context, new ProvideSharedDependency(config.shareScope, config.shareKey, version || false, resource, config.eager), {\n          name: undefined\n        }, err => {\n          if (err) return reject(err);\n          resolve(null);\n        });\n      }))).then(() => {});\n    });\n    compiler.hooks.compilation.tap(\"ProvideSharedPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ProvideForSharedDependency, normalModuleFactory);\n      compilation.dependencyFactories.set(ProvideSharedDependency, new ProvideSharedModuleFactory());\n    });\n  }\n}\nmodule.exports = ProvideSharedPlugin;","map":{"version":3,"names":["WebpackError","require","parseOptions","createSchemaValidation","ProvideForSharedDependency","ProvideSharedDependency","ProvideSharedModuleFactory","validate","name","baseDataPath","ProvideSharedPlugin","constructor","options","_provides","provides","item","Array","isArray","Error","result","shareKey","version","undefined","shareScope","eager","sort","a","b","apply","compiler","compilationData","WeakMap","hooks","compilation","tap","normalModuleFactory","resolvedProvideMap","Map","matchProvides","prefixMatchProvides","request","config","test","set","endsWith","provideSharedModule","key","resource","resourceResolveData","details","descriptionFileData","descriptionFilePath","error","file","warnings","push","module","resolveData","has","get","cacheable","prefix","startsWith","remainder","slice","length","finishMake","tapPromise","Promise","resolve","all","from","reject","addInclude","context","err","then","dependencyFactories","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/sharing/ProvideSharedPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra and Zackary Jackson @ScriptedAlchemy\n*/\n\n\"use strict\";\n\nconst WebpackError = require(\"../WebpackError\");\nconst { parseOptions } = require(\"../container/options\");\nconst createSchemaValidation = require(\"../util/create-schema-validation\");\nconst ProvideForSharedDependency = require(\"./ProvideForSharedDependency\");\nconst ProvideSharedDependency = require(\"./ProvideSharedDependency\");\nconst ProvideSharedModuleFactory = require(\"./ProvideSharedModuleFactory\");\n\n/** @typedef {import(\"../../declarations/plugins/sharing/ProvideSharedPlugin\").ProvideSharedPluginOptions} ProvideSharedPluginOptions */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../NormalModuleFactory\").NormalModuleCreateData} NormalModuleCreateData */\n\nconst validate = createSchemaValidation(\n\trequire(\"../../schemas/plugins/sharing/ProvideSharedPlugin.check.js\"),\n\t() => require(\"../../schemas/plugins/sharing/ProvideSharedPlugin.json\"),\n\t{\n\t\tname: \"Provide Shared Plugin\",\n\t\tbaseDataPath: \"options\"\n\t}\n);\n\n/**\n * @typedef {Object} ProvideOptions\n * @property {string} shareKey\n * @property {string} shareScope\n * @property {string | undefined | false} version\n * @property {boolean} eager\n */\n\n/** @typedef {Map<string, { config: ProvideOptions, version: string | undefined | false }>} ResolvedProvideMap */\n\nclass ProvideSharedPlugin {\n\t/**\n\t * @param {ProvideSharedPluginOptions} options options\n\t */\n\tconstructor(options) {\n\t\tvalidate(options);\n\n\t\tthis._provides = /** @type {[string, ProvideOptions][]} */ (\n\t\t\tparseOptions(\n\t\t\t\toptions.provides,\n\t\t\t\titem => {\n\t\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\t\tthrow new Error(\"Unexpected array of provides\");\n\t\t\t\t\t/** @type {ProvideOptions} */\n\t\t\t\t\tconst result = {\n\t\t\t\t\t\tshareKey: item,\n\t\t\t\t\t\tversion: undefined,\n\t\t\t\t\t\tshareScope: options.shareScope || \"default\",\n\t\t\t\t\t\teager: false\n\t\t\t\t\t};\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\titem => ({\n\t\t\t\t\tshareKey: item.shareKey,\n\t\t\t\t\tversion: item.version,\n\t\t\t\t\tshareScope: item.shareScope || options.shareScope || \"default\",\n\t\t\t\t\teager: !!item.eager\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t\tthis._provides.sort(([a], [b]) => {\n\t\t\tif (a < b) return -1;\n\t\t\tif (b < a) return 1;\n\t\t\treturn 0;\n\t\t});\n\t}\n\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\t/** @type {WeakMap<Compilation, ResolvedProvideMap>} */\n\t\tconst compilationData = new WeakMap();\n\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ProvideSharedPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\t/** @type {ResolvedProvideMap} */\n\t\t\t\tconst resolvedProvideMap = new Map();\n\t\t\t\t/** @type {Map<string, ProvideOptions>} */\n\t\t\t\tconst matchProvides = new Map();\n\t\t\t\t/** @type {Map<string, ProvideOptions>} */\n\t\t\t\tconst prefixMatchProvides = new Map();\n\t\t\t\tfor (const [request, config] of this._provides) {\n\t\t\t\t\tif (/^(\\/|[A-Za-z]:\\\\|\\\\\\\\|\\.\\.?(\\/|$))/.test(request)) {\n\t\t\t\t\t\t// relative request\n\t\t\t\t\t\tresolvedProvideMap.set(request, {\n\t\t\t\t\t\t\tconfig,\n\t\t\t\t\t\t\tversion: config.version\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (/^(\\/|[A-Za-z]:\\\\|\\\\\\\\)/.test(request)) {\n\t\t\t\t\t\t// absolute path\n\t\t\t\t\t\tresolvedProvideMap.set(request, {\n\t\t\t\t\t\t\tconfig,\n\t\t\t\t\t\t\tversion: config.version\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (request.endsWith(\"/\")) {\n\t\t\t\t\t\t// module request prefix\n\t\t\t\t\t\tprefixMatchProvides.set(request, config);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// module request\n\t\t\t\t\t\tmatchProvides.set(request, config);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcompilationData.set(compilation, resolvedProvideMap);\n\t\t\t\t/**\n\t\t\t\t * @param {string} key key\n\t\t\t\t * @param {ProvideOptions} config config\n\t\t\t\t * @param {NormalModuleCreateData[\"resource\"]} resource resource\n\t\t\t\t * @param {NormalModuleCreateData[\"resourceResolveData\"]} resourceResolveData resource resolve data\n\t\t\t\t */\n\t\t\t\tconst provideSharedModule = (\n\t\t\t\t\tkey,\n\t\t\t\t\tconfig,\n\t\t\t\t\tresource,\n\t\t\t\t\tresourceResolveData\n\t\t\t\t) => {\n\t\t\t\t\tlet version = config.version;\n\t\t\t\t\tif (version === undefined) {\n\t\t\t\t\t\tlet details = \"\";\n\t\t\t\t\t\tif (!resourceResolveData) {\n\t\t\t\t\t\t\tdetails = `No resolve data provided from resolver.`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst descriptionFileData =\n\t\t\t\t\t\t\t\tresourceResolveData.descriptionFileData;\n\t\t\t\t\t\t\tif (!descriptionFileData) {\n\t\t\t\t\t\t\t\tdetails =\n\t\t\t\t\t\t\t\t\t\"No description file (usually package.json) found. Add description file with name and version, or manually specify version in shared config.\";\n\t\t\t\t\t\t\t} else if (!descriptionFileData.version) {\n\t\t\t\t\t\t\t\tdetails = `No version in description file (usually package.json). Add version to description file ${resourceResolveData.descriptionFilePath}, or manually specify version in shared config.`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tversion = descriptionFileData.version;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!version) {\n\t\t\t\t\t\t\tconst error = new WebpackError(\n\t\t\t\t\t\t\t\t`No version specified and unable to automatically determine one. ${details}`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\terror.file = `shared module ${key} -> ${resource}`;\n\t\t\t\t\t\t\tcompilation.warnings.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresolvedProvideMap.set(resource, {\n\t\t\t\t\t\tconfig,\n\t\t\t\t\t\tversion\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tnormalModuleFactory.hooks.module.tap(\n\t\t\t\t\t\"ProvideSharedPlugin\",\n\t\t\t\t\t(module, { resource, resourceResolveData }, resolveData) => {\n\t\t\t\t\t\tif (resolvedProvideMap.has(/** @type {string} */ (resource))) {\n\t\t\t\t\t\t\treturn module;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { request } = resolveData;\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst config = matchProvides.get(request);\n\t\t\t\t\t\t\tif (config !== undefined) {\n\t\t\t\t\t\t\t\tprovideSharedModule(\n\t\t\t\t\t\t\t\t\trequest,\n\t\t\t\t\t\t\t\t\tconfig,\n\t\t\t\t\t\t\t\t\t/** @type {string} */ (resource),\n\t\t\t\t\t\t\t\t\tresourceResolveData\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tresolveData.cacheable = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (const [prefix, config] of prefixMatchProvides) {\n\t\t\t\t\t\t\tif (request.startsWith(prefix)) {\n\t\t\t\t\t\t\t\tconst remainder = request.slice(prefix.length);\n\t\t\t\t\t\t\t\tprovideSharedModule(\n\t\t\t\t\t\t\t\t\t/** @type {string} */ (resource),\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t...config,\n\t\t\t\t\t\t\t\t\t\tshareKey: config.shareKey + remainder\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t/** @type {string} */ (resource),\n\t\t\t\t\t\t\t\t\tresourceResolveData\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tresolveData.cacheable = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn module;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t\tcompiler.hooks.finishMake.tapPromise(\"ProvideSharedPlugin\", compilation => {\n\t\t\tconst resolvedProvideMap = compilationData.get(compilation);\n\t\t\tif (!resolvedProvideMap) return Promise.resolve();\n\t\t\treturn Promise.all(\n\t\t\t\tArray.from(\n\t\t\t\t\tresolvedProvideMap,\n\t\t\t\t\t([resource, { config, version }]) =>\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\tcompilation.addInclude(\n\t\t\t\t\t\t\t\tcompiler.context,\n\t\t\t\t\t\t\t\tnew ProvideSharedDependency(\n\t\t\t\t\t\t\t\t\tconfig.shareScope,\n\t\t\t\t\t\t\t\t\tconfig.shareKey,\n\t\t\t\t\t\t\t\t\tversion || false,\n\t\t\t\t\t\t\t\t\tresource,\n\t\t\t\t\t\t\t\t\tconfig.eager\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: undefined\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terr => {\n\t\t\t\t\t\t\t\t\tif (err) return reject(err);\n\t\t\t\t\t\t\t\t\tresolve(null);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t).then(() => {});\n\t\t});\n\n\t\tcompiler.hooks.compilation.tap(\n\t\t\t\"ProvideSharedPlugin\",\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tProvideForSharedDependency,\n\t\t\t\t\tnormalModuleFactory\n\t\t\t\t);\n\n\t\t\t\tcompilation.dependencyFactories.set(\n\t\t\t\t\tProvideSharedDependency,\n\t\t\t\t\tnew ProvideSharedModuleFactory()\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ProvideSharedPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}