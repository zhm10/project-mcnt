{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst WebpackError = require(\"../WebpackError\");\nconst {\n  evaluateToString,\n  expressionIsUnsupported,\n  toConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst ConstDependency = require(\"./ConstDependency\");\nconst SystemRuntimeModule = require(\"./SystemRuntimeModule\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\nconst PLUGIN_NAME = \"SystemPlugin\";\nclass SystemPlugin {\n  /**\n   * Apply the plugin\n   * @param {Compiler} compiler the compiler instance\n   * @returns {void}\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.hooks.runtimeRequirementInModule.for(RuntimeGlobals.system).tap(PLUGIN_NAME, (module, set) => {\n        set.add(RuntimeGlobals.requireScope);\n      });\n      compilation.hooks.runtimeRequirementInTree.for(RuntimeGlobals.system).tap(PLUGIN_NAME, (chunk, set) => {\n        compilation.addRuntimeModule(chunk, new SystemRuntimeModule());\n      });\n\n      /**\n       * @param {Parser} parser parser parser\n       * @param {JavascriptParserOptions} parserOptions parserOptions\n       * @returns {void}\n       */\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.system === undefined || !parserOptions.system) {\n          return;\n        }\n\n        /**\n         * @param {string} name name\n         */\n        const setNotSupported = name => {\n          parser.hooks.evaluateTypeof.for(name).tap(PLUGIN_NAME, evaluateToString(\"undefined\"));\n          parser.hooks.expression.for(name).tap(PLUGIN_NAME, expressionIsUnsupported(parser, name + \" is not supported by webpack.\"));\n        };\n        parser.hooks.typeof.for(\"System.import\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"function\")));\n        parser.hooks.evaluateTypeof.for(\"System.import\").tap(PLUGIN_NAME, evaluateToString(\"function\"));\n        parser.hooks.typeof.for(\"System\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"object\")));\n        parser.hooks.evaluateTypeof.for(\"System\").tap(PLUGIN_NAME, evaluateToString(\"object\"));\n        setNotSupported(\"System.set\");\n        setNotSupported(\"System.get\");\n        setNotSupported(\"System.register\");\n        parser.hooks.expression.for(\"System\").tap(PLUGIN_NAME, expr => {\n          const dep = new ConstDependency(RuntimeGlobals.system, /** @type {Range} */expr.range, [RuntimeGlobals.system]);\n          dep.loc = /** @type {DependencyLocation} */expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.call.for(\"System.import\").tap(PLUGIN_NAME, expr => {\n          parser.state.module.addWarning(new SystemImportDeprecationWarning( /** @type {DependencyLocation} */expr.loc));\n          return parser.hooks.importCall.call({\n            type: \"ImportExpression\",\n            source: ( /** @type {import(\"estree\").Literal} */\n            expr.arguments[0]),\n            loc: expr.loc,\n            range: expr.range\n          });\n        });\n      };\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, handler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC).tap(PLUGIN_NAME, handler);\n    });\n  }\n}\nclass SystemImportDeprecationWarning extends WebpackError {\n  /**\n   * @param {DependencyLocation} loc location\n   */\n  constructor(loc) {\n    super(\"System.import() is deprecated and will be removed soon. Use import() instead.\\n\" + \"For more info visit https://webpack.js.org/guides/code-splitting/\");\n    this.name = \"SystemImportDeprecationWarning\";\n    this.loc = loc;\n  }\n}\nmakeSerializable(SystemImportDeprecationWarning, \"webpack/lib/dependencies/SystemPlugin\", \"SystemImportDeprecationWarning\");\nmodule.exports = SystemPlugin;\nmodule.exports.SystemImportDeprecationWarning = SystemImportDeprecationWarning;","map":{"version":3,"names":["JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_DYNAMIC","require","RuntimeGlobals","WebpackError","evaluateToString","expressionIsUnsupported","toConstantDependency","makeSerializable","ConstDependency","SystemRuntimeModule","PLUGIN_NAME","SystemPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","runtimeRequirementInModule","for","system","module","set","add","requireScope","runtimeRequirementInTree","chunk","addRuntimeModule","handler","parser","parserOptions","undefined","setNotSupported","name","evaluateTypeof","expression","typeof","JSON","stringify","expr","dep","range","loc","state","addPresentationalDependency","call","addWarning","SystemImportDeprecationWarning","importCall","type","source","arguments","constructor","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/dependencies/SystemPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_DYNAMIC\n} = require(\"../ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst WebpackError = require(\"../WebpackError\");\nconst {\n\tevaluateToString,\n\texpressionIsUnsupported,\n\ttoConstantDependency\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst makeSerializable = require(\"../util/makeSerializable\");\nconst ConstDependency = require(\"./ConstDependency\");\nconst SystemRuntimeModule = require(\"./SystemRuntimeModule\");\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\nconst PLUGIN_NAME = \"SystemPlugin\";\n\nclass SystemPlugin {\n\t/**\n\t * Apply the plugin\n\t * @param {Compiler} compiler the compiler instance\n\t * @returns {void}\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\tcompilation.hooks.runtimeRequirementInModule\n\t\t\t\t\t.for(RuntimeGlobals.system)\n\t\t\t\t\t.tap(PLUGIN_NAME, (module, set) => {\n\t\t\t\t\t\tset.add(RuntimeGlobals.requireScope);\n\t\t\t\t\t});\n\n\t\t\t\tcompilation.hooks.runtimeRequirementInTree\n\t\t\t\t\t.for(RuntimeGlobals.system)\n\t\t\t\t\t.tap(PLUGIN_NAME, (chunk, set) => {\n\t\t\t\t\t\tcompilation.addRuntimeModule(chunk, new SystemRuntimeModule());\n\t\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * @param {Parser} parser parser parser\n\t\t\t\t * @param {JavascriptParserOptions} parserOptions parserOptions\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst handler = (parser, parserOptions) => {\n\t\t\t\t\tif (parserOptions.system === undefined || !parserOptions.system) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string} name name\n\t\t\t\t\t */\n\t\t\t\t\tconst setNotSupported = name => {\n\t\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"undefined\"));\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(name)\n\t\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\t\texpressionIsUnsupported(\n\t\t\t\t\t\t\t\t\tparser,\n\t\t\t\t\t\t\t\t\tname + \" is not supported by webpack.\"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"System.import\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"function\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"System.import\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"function\"));\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"System\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"object\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"System\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"object\"));\n\n\t\t\t\t\tsetNotSupported(\"System.set\");\n\t\t\t\t\tsetNotSupported(\"System.get\");\n\t\t\t\t\tsetNotSupported(\"System.register\");\n\n\t\t\t\t\tparser.hooks.expression.for(\"System\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\tRuntimeGlobals.system,\n\t\t\t\t\t\t\t/** @type {Range} */ (expr.range),\n\t\t\t\t\t\t\t[RuntimeGlobals.system]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tparser.hooks.call.for(\"System.import\").tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\tparser.state.module.addWarning(\n\t\t\t\t\t\t\tnew SystemImportDeprecationWarning(\n\t\t\t\t\t\t\t\t/** @type {DependencyLocation} */ (expr.loc)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn parser.hooks.importCall.call({\n\t\t\t\t\t\t\ttype: \"ImportExpression\",\n\t\t\t\t\t\t\tsource:\n\t\t\t\t\t\t\t\t/** @type {import(\"estree\").Literal} */\n\t\t\t\t\t\t\t\t(expr.arguments[0]),\n\t\t\t\t\t\t\tloc: expr.loc,\n\t\t\t\t\t\t\trange: expr.range\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_DYNAMIC)\n\t\t\t\t\t.tap(PLUGIN_NAME, handler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nclass SystemImportDeprecationWarning extends WebpackError {\n\t/**\n\t * @param {DependencyLocation} loc location\n\t */\n\tconstructor(loc) {\n\t\tsuper(\n\t\t\t\"System.import() is deprecated and will be removed soon. Use import() instead.\\n\" +\n\t\t\t\t\"For more info visit https://webpack.js.org/guides/code-splitting/\"\n\t\t);\n\n\t\tthis.name = \"SystemImportDeprecationWarning\";\n\n\t\tthis.loc = loc;\n\t}\n}\n\nmakeSerializable(\n\tSystemImportDeprecationWarning,\n\t\"webpack/lib/dependencies/SystemPlugin\",\n\t\"SystemImportDeprecationWarning\"\n);\n\nmodule.exports = SystemPlugin;\nmodule.exports.SystemImportDeprecationWarning = SystemImportDeprecationWarning;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}