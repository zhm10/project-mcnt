{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/** @typedef {import(\"ajv\").Ajv} Ajv */\n\n/**\n *\n * @param {Ajv} ajv\n * @param {string} keyword\n * @param {any} definition\n */\nfunction addKeyword(ajv, keyword, definition) {\n  let customRuleCode;\n  try {\n    // @ts-ignore\n    // eslint-disable-next-line global-require\n    customRuleCode = require(\"ajv/lib/dotjs/custom\"); // @ts-ignore\n\n    const {\n      RULES\n    } = ajv;\n    let ruleGroup;\n    for (let i = 0; i < RULES.length; i++) {\n      const rg = RULES[i];\n      if (typeof rg.type === \"undefined\") {\n        ruleGroup = rg;\n        break;\n      }\n    }\n    const rule = {\n      keyword,\n      definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.unshift(rule);\n    RULES.custom[keyword] = rule;\n    RULES.keywords[keyword] = true;\n    RULES.all[keyword] = true;\n  } catch (e) {// Nothing, fallback\n  }\n}\n/**\n *\n * @param {Ajv} ajv\n * @returns {Ajv}\n */\n\nfunction addUndefinedAsNullKeyword(ajv) {\n  // There is workaround for old versions of ajv, where `before` is not implemented\n  addKeyword(ajv, \"undefinedAsNull\", {\n    modifying: true,\n    /**\n     * @param {boolean} kwVal\n     * @param {unknown} data\n     * @param {any} parentSchema\n     * @param {string} dataPath\n     * @param {unknown} parentData\n     * @param {number | string} parentDataProperty\n     * @return {boolean}\n     */\n    validate(kwVal, data, parentSchema, dataPath, parentData, parentDataProperty) {\n      if (kwVal && parentSchema && typeof parentSchema.enum !== \"undefined\" && parentData && typeof parentDataProperty === \"number\") {\n        const idx = /** @type {number} */\n        parentDataProperty;\n        const parentDataRef = /** @type {any[]} */\n        parentData;\n        if (typeof parentDataRef[idx] === \"undefined\") {\n          parentDataRef[idx] = null;\n        }\n      }\n      return true;\n    }\n  });\n  return ajv;\n}\nvar _default = addUndefinedAsNullKeyword;\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","addKeyword","ajv","keyword","definition","customRuleCode","require","RULES","ruleGroup","i","length","rg","type","rule","custom","code","implements","rules","unshift","keywords","all","e","addUndefinedAsNullKeyword","modifying","validate","kwVal","data","parentSchema","dataPath","parentData","parentDataProperty","enum","idx","parentDataRef","_default"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/schema-utils/dist/keywords/undefinedAsNull.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/** @typedef {import(\"ajv\").Ajv} Ajv */\n\n/**\n *\n * @param {Ajv} ajv\n * @param {string} keyword\n * @param {any} definition\n */\nfunction addKeyword(ajv, keyword, definition) {\n  let customRuleCode;\n\n  try {\n    // @ts-ignore\n    // eslint-disable-next-line global-require\n    customRuleCode = require(\"ajv/lib/dotjs/custom\"); // @ts-ignore\n\n    const {\n      RULES\n    } = ajv;\n    let ruleGroup;\n\n    for (let i = 0; i < RULES.length; i++) {\n      const rg = RULES[i];\n\n      if (typeof rg.type === \"undefined\") {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    const rule = {\n      keyword,\n      definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.unshift(rule);\n    RULES.custom[keyword] = rule;\n    RULES.keywords[keyword] = true;\n    RULES.all[keyword] = true;\n  } catch (e) {// Nothing, fallback\n  }\n}\n/**\n *\n * @param {Ajv} ajv\n * @returns {Ajv}\n */\n\n\nfunction addUndefinedAsNullKeyword(ajv) {\n  // There is workaround for old versions of ajv, where `before` is not implemented\n  addKeyword(ajv, \"undefinedAsNull\", {\n    modifying: true,\n\n    /**\n     * @param {boolean} kwVal\n     * @param {unknown} data\n     * @param {any} parentSchema\n     * @param {string} dataPath\n     * @param {unknown} parentData\n     * @param {number | string} parentDataProperty\n     * @return {boolean}\n     */\n    validate(kwVal, data, parentSchema, dataPath, parentData, parentDataProperty) {\n      if (kwVal && parentSchema && typeof parentSchema.enum !== \"undefined\" && parentData && typeof parentDataProperty === \"number\") {\n        const idx =\n        /** @type {number} */\n        parentDataProperty;\n        const parentDataRef =\n        /** @type {any[]} */\n        parentData;\n\n        if (typeof parentDataRef[idx] === \"undefined\") {\n          parentDataRef[idx] = null;\n        }\n      }\n\n      return true;\n    }\n\n  });\n  return ajv;\n}\n\nvar _default = addUndefinedAsNullKeyword;\nexports.default = _default;"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;;AAExB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAACC,GAAG,EAAEC,OAAO,EAAEC,UAAU,EAAE;EAC5C,IAAIC,cAAc;EAElB,IAAI;IACF;IACA;IACAA,cAAc,GAAGC,OAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC;;IAElD,MAAM;MACJC;IACF,CAAC,GAAGL,GAAG;IACP,IAAIM,SAAS;IAEb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,KAAK,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,MAAME,EAAE,GAAGJ,KAAK,CAACE,CAAC,CAAC;MAEnB,IAAI,OAAOE,EAAE,CAACC,IAAI,KAAK,WAAW,EAAE;QAClCJ,SAAS,GAAGG,EAAE;QACd;MACF;IACF;IAEA,MAAME,IAAI,GAAG;MACXV,OAAO;MACPC,UAAU;MACVU,MAAM,EAAE,IAAI;MACZC,IAAI,EAAEV,cAAc;MACpBW,UAAU,EAAEZ,UAAU,CAACY;IACzB,CAAC;IACDR,SAAS,CAACS,KAAK,CAACC,OAAO,CAACL,IAAI,CAAC;IAC7BN,KAAK,CAACO,MAAM,CAACX,OAAO,CAAC,GAAGU,IAAI;IAC5BN,KAAK,CAACY,QAAQ,CAAChB,OAAO,CAAC,GAAG,IAAI;IAC9BI,KAAK,CAACa,GAAG,CAACjB,OAAO,CAAC,GAAG,IAAI;EAC3B,CAAC,CAAC,OAAOkB,CAAC,EAAE,CAAC;EAAA;AAEf;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASC,yBAAyBA,CAACpB,GAAG,EAAE;EACtC;EACAD,UAAU,CAACC,GAAG,EAAE,iBAAiB,EAAE;IACjCqB,SAAS,EAAE,IAAI;IAEf;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,QAAQA,CAACC,KAAK,EAAEC,IAAI,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,kBAAkB,EAAE;MAC5E,IAAIL,KAAK,IAAIE,YAAY,IAAI,OAAOA,YAAY,CAACI,IAAI,KAAK,WAAW,IAAIF,UAAU,IAAI,OAAOC,kBAAkB,KAAK,QAAQ,EAAE;QAC7H,MAAME,GAAG,GACT;QACAF,kBAAkB;QAClB,MAAMG,aAAa,GACnB;QACAJ,UAAU;QAEV,IAAI,OAAOI,aAAa,CAACD,GAAG,CAAC,KAAK,WAAW,EAAE;UAC7CC,aAAa,CAACD,GAAG,CAAC,GAAG,IAAI;QAC3B;MACF;MAEA,OAAO,IAAI;IACb;EAEF,CAAC,CAAC;EACF,OAAO9B,GAAG;AACZ;AAEA,IAAIgC,QAAQ,GAAGZ,yBAAyB;AACxCxB,OAAO,CAACE,OAAO,GAAGkC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}