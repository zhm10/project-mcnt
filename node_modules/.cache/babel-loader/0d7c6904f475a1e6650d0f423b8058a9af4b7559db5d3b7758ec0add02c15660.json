{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Ivan Kopeykin @vankop\n*/\n\n\"use strict\";\n\nconst {\n  pathToFileURL\n} = require(\"url\");\nconst ModuleDependencyWarning = require(\"../ModuleDependencyWarning\");\nconst {\n  JAVASCRIPT_MODULE_TYPE_AUTO,\n  JAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"../ModuleTypeConstants\");\nconst Template = require(\"../Template\");\nconst BasicEvaluatedExpression = require(\"../javascript/BasicEvaluatedExpression\");\nconst {\n  evaluateToIdentifier,\n  toConstantDependency,\n  evaluateToString,\n  evaluateToNumber\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst memoize = require(\"../util/memoize\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst ConstDependency = require(\"./ConstDependency\");\n\n/** @typedef {import(\"estree\").MemberExpression} MemberExpression */\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../NormalModule\")} NormalModule */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\nconst getCriticalDependencyWarning = memoize(() => require(\"./CriticalDependencyWarning\"));\nconst PLUGIN_NAME = \"ImportMetaPlugin\";\nclass ImportMetaPlugin {\n  /**\n   * @param {Compiler} compiler compiler\n   */\n  apply(compiler) {\n    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation, {\n      normalModuleFactory\n    }) => {\n      /**\n       * @param {NormalModule} module module\n       * @returns {string} file url\n       */\n      const getUrl = module => {\n        return pathToFileURL(module.resource).toString();\n      };\n      /**\n       * @param {Parser} parser parser parser\n       * @param {JavascriptParserOptions} parserOptions parserOptions\n       * @returns {void}\n       */\n      const parserHandler = (parser, {\n        importMeta\n      }) => {\n        if (importMeta === false) {\n          const {\n            importMetaName\n          } = compilation.outputOptions;\n          if (importMetaName === \"import.meta\") return;\n          parser.hooks.expression.for(\"import.meta\").tap(PLUGIN_NAME, metaProperty => {\n            const dep = new ConstDependency( /** @type {string} */importMetaName, /** @type {Range} */metaProperty.range);\n            dep.loc = /** @type {DependencyLocation} */metaProperty.loc;\n            parser.state.module.addPresentationalDependency(dep);\n            return true;\n          });\n          return;\n        }\n\n        /// import.meta direct ///\n        const webpackVersion = parseInt(require(\"../../package.json\").version, 10);\n        const importMetaUrl = () => JSON.stringify(getUrl(parser.state.module));\n        const importMetaWebpackVersion = () => JSON.stringify(webpackVersion);\n        /**\n         * @param {string[]} members members\n         * @returns {string} error message\n         */\n        const importMetaUnknownProperty = members => `${Template.toNormalComment(\"unsupported import.meta.\" + members.join(\".\"))} undefined${propertyAccess(members, 1)}`;\n        parser.hooks.typeof.for(\"import.meta\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"object\")));\n        parser.hooks.expression.for(\"import.meta\").tap(PLUGIN_NAME, metaProperty => {\n          const referencedPropertiesInDestructuring = parser.destructuringAssignmentPropertiesFor(metaProperty);\n          if (!referencedPropertiesInDestructuring) {\n            const CriticalDependencyWarning = getCriticalDependencyWarning();\n            parser.state.module.addWarning(new ModuleDependencyWarning(parser.state.module, new CriticalDependencyWarning(\"Accessing import.meta directly is unsupported (only property access or destructuring is supported)\"), /** @type {DependencyLocation} */metaProperty.loc));\n            const dep = new ConstDependency(`${parser.isAsiPosition( /** @type {Range} */metaProperty.range[0]) ? \";\" : \"\"}({})`, /** @type {Range} */metaProperty.range);\n            dep.loc = /** @type {DependencyLocation} */metaProperty.loc;\n            parser.state.module.addPresentationalDependency(dep);\n            return true;\n          }\n          let str = \"\";\n          for (const prop of referencedPropertiesInDestructuring) {\n            switch (prop) {\n              case \"url\":\n                str += `url: ${importMetaUrl()},`;\n                break;\n              case \"webpack\":\n                str += `webpack: ${importMetaWebpackVersion()},`;\n                break;\n              default:\n                str += `[${JSON.stringify(prop)}]: ${importMetaUnknownProperty([prop])},`;\n                break;\n            }\n          }\n          const dep = new ConstDependency(`({${str}})`, /** @type {Range} */metaProperty.range);\n          dep.loc = /** @type {DependencyLocation} */metaProperty.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateTypeof.for(\"import.meta\").tap(PLUGIN_NAME, evaluateToString(\"object\"));\n        parser.hooks.evaluateIdentifier.for(\"import.meta\").tap(PLUGIN_NAME, evaluateToIdentifier(\"import.meta\", \"import.meta\", () => [], true));\n\n        /// import.meta.url ///\n        parser.hooks.typeof.for(\"import.meta.url\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"string\")));\n        parser.hooks.expression.for(\"import.meta.url\").tap(PLUGIN_NAME, expr => {\n          const dep = new ConstDependency(importMetaUrl(), /** @type {Range} */expr.range);\n          dep.loc = /** @type {DependencyLocation} */expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluateTypeof.for(\"import.meta.url\").tap(PLUGIN_NAME, evaluateToString(\"string\"));\n        parser.hooks.evaluateIdentifier.for(\"import.meta.url\").tap(PLUGIN_NAME, expr => {\n          return new BasicEvaluatedExpression().setString(getUrl(parser.state.module)).setRange( /** @type {Range} */expr.range);\n        });\n\n        /// import.meta.webpack ///\n        parser.hooks.typeof.for(\"import.meta.webpack\").tap(PLUGIN_NAME, toConstantDependency(parser, JSON.stringify(\"number\")));\n        parser.hooks.expression.for(\"import.meta.webpack\").tap(PLUGIN_NAME, toConstantDependency(parser, importMetaWebpackVersion()));\n        parser.hooks.evaluateTypeof.for(\"import.meta.webpack\").tap(PLUGIN_NAME, evaluateToString(\"number\"));\n        parser.hooks.evaluateIdentifier.for(\"import.meta.webpack\").tap(PLUGIN_NAME, evaluateToNumber(webpackVersion));\n\n        /// Unknown properties ///\n        parser.hooks.unhandledExpressionMemberChain.for(\"import.meta\").tap(PLUGIN_NAME, (expr, members) => {\n          const dep = new ConstDependency(importMetaUnknownProperty(members), /** @type {Range} */expr.range);\n          dep.loc = /** @type {DependencyLocation} */expr.loc;\n          parser.state.module.addPresentationalDependency(dep);\n          return true;\n        });\n        parser.hooks.evaluate.for(\"MemberExpression\").tap(PLUGIN_NAME, expression => {\n          const expr = /** @type {MemberExpression} */expression;\n          if (expr.object.type === \"MetaProperty\" && expr.object.meta.name === \"import\" && expr.object.property.name === \"meta\" && expr.property.type === (expr.computed ? \"Literal\" : \"Identifier\")) {\n            return new BasicEvaluatedExpression().setUndefined().setRange( /** @type {Range} */expr.range);\n          }\n        });\n      };\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_AUTO).tap(PLUGIN_NAME, parserHandler);\n      normalModuleFactory.hooks.parser.for(JAVASCRIPT_MODULE_TYPE_ESM).tap(PLUGIN_NAME, parserHandler);\n    });\n  }\n}\nmodule.exports = ImportMetaPlugin;","map":{"version":3,"names":["pathToFileURL","require","ModuleDependencyWarning","JAVASCRIPT_MODULE_TYPE_AUTO","JAVASCRIPT_MODULE_TYPE_ESM","Template","BasicEvaluatedExpression","evaluateToIdentifier","toConstantDependency","evaluateToString","evaluateToNumber","memoize","propertyAccess","ConstDependency","getCriticalDependencyWarning","PLUGIN_NAME","ImportMetaPlugin","apply","compiler","hooks","compilation","tap","normalModuleFactory","getUrl","module","resource","toString","parserHandler","parser","importMeta","importMetaName","outputOptions","expression","for","metaProperty","dep","range","loc","state","addPresentationalDependency","webpackVersion","parseInt","version","importMetaUrl","JSON","stringify","importMetaWebpackVersion","importMetaUnknownProperty","members","toNormalComment","join","typeof","referencedPropertiesInDestructuring","destructuringAssignmentPropertiesFor","CriticalDependencyWarning","addWarning","isAsiPosition","str","prop","evaluateTypeof","evaluateIdentifier","expr","setString","setRange","unhandledExpressionMemberChain","evaluate","object","type","meta","name","property","computed","setUndefined","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/dependencies/ImportMetaPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Ivan Kopeykin @vankop\n*/\n\n\"use strict\";\n\nconst { pathToFileURL } = require(\"url\");\nconst ModuleDependencyWarning = require(\"../ModuleDependencyWarning\");\nconst {\n\tJAVASCRIPT_MODULE_TYPE_AUTO,\n\tJAVASCRIPT_MODULE_TYPE_ESM\n} = require(\"../ModuleTypeConstants\");\nconst Template = require(\"../Template\");\nconst BasicEvaluatedExpression = require(\"../javascript/BasicEvaluatedExpression\");\nconst {\n\tevaluateToIdentifier,\n\ttoConstantDependency,\n\tevaluateToString,\n\tevaluateToNumber\n} = require(\"../javascript/JavascriptParserHelpers\");\nconst memoize = require(\"../util/memoize\");\nconst propertyAccess = require(\"../util/propertyAccess\");\nconst ConstDependency = require(\"./ConstDependency\");\n\n/** @typedef {import(\"estree\").MemberExpression} MemberExpression */\n/** @typedef {import(\"../../declarations/WebpackOptions\").JavascriptParserOptions} JavascriptParserOptions */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Dependency\").DependencyLocation} DependencyLocation */\n/** @typedef {import(\"../NormalModule\")} NormalModule */\n/** @typedef {import(\"../javascript/JavascriptParser\")} Parser */\n/** @typedef {import(\"../javascript/JavascriptParser\").Range} Range */\n\nconst getCriticalDependencyWarning = memoize(() =>\n\trequire(\"./CriticalDependencyWarning\")\n);\n\nconst PLUGIN_NAME = \"ImportMetaPlugin\";\n\nclass ImportMetaPlugin {\n\t/**\n\t * @param {Compiler} compiler compiler\n\t */\n\tapply(compiler) {\n\t\tcompiler.hooks.compilation.tap(\n\t\t\tPLUGIN_NAME,\n\t\t\t(compilation, { normalModuleFactory }) => {\n\t\t\t\t/**\n\t\t\t\t * @param {NormalModule} module module\n\t\t\t\t * @returns {string} file url\n\t\t\t\t */\n\t\t\t\tconst getUrl = module => {\n\t\t\t\t\treturn pathToFileURL(module.resource).toString();\n\t\t\t\t};\n\t\t\t\t/**\n\t\t\t\t * @param {Parser} parser parser parser\n\t\t\t\t * @param {JavascriptParserOptions} parserOptions parserOptions\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst parserHandler = (parser, { importMeta }) => {\n\t\t\t\t\tif (importMeta === false) {\n\t\t\t\t\t\tconst { importMetaName } = compilation.outputOptions;\n\t\t\t\t\t\tif (importMetaName === \"import.meta\") return;\n\n\t\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t\t.for(\"import.meta\")\n\t\t\t\t\t\t\t.tap(PLUGIN_NAME, metaProperty => {\n\t\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\t\t/** @type {string} */ (importMetaName),\n\t\t\t\t\t\t\t\t\t/** @type {Range} */ (metaProperty.range)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (metaProperty.loc);\n\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t/// import.meta direct ///\n\t\t\t\t\tconst webpackVersion = parseInt(\n\t\t\t\t\t\trequire(\"../../package.json\").version,\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tconst importMetaUrl = () =>\n\t\t\t\t\t\tJSON.stringify(getUrl(parser.state.module));\n\t\t\t\t\tconst importMetaWebpackVersion = () => JSON.stringify(webpackVersion);\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {string[]} members members\n\t\t\t\t\t * @returns {string} error message\n\t\t\t\t\t */\n\t\t\t\t\tconst importMetaUnknownProperty = members =>\n\t\t\t\t\t\t`${Template.toNormalComment(\n\t\t\t\t\t\t\t\"unsupported import.meta.\" + members.join(\".\")\n\t\t\t\t\t\t)} undefined${propertyAccess(members, 1)}`;\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"import.meta\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"object\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"import.meta\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, metaProperty => {\n\t\t\t\t\t\t\tconst referencedPropertiesInDestructuring =\n\t\t\t\t\t\t\t\tparser.destructuringAssignmentPropertiesFor(metaProperty);\n\t\t\t\t\t\t\tif (!referencedPropertiesInDestructuring) {\n\t\t\t\t\t\t\t\tconst CriticalDependencyWarning =\n\t\t\t\t\t\t\t\t\tgetCriticalDependencyWarning();\n\t\t\t\t\t\t\t\tparser.state.module.addWarning(\n\t\t\t\t\t\t\t\t\tnew ModuleDependencyWarning(\n\t\t\t\t\t\t\t\t\t\tparser.state.module,\n\t\t\t\t\t\t\t\t\t\tnew CriticalDependencyWarning(\n\t\t\t\t\t\t\t\t\t\t\t\"Accessing import.meta directly is unsupported (only property access or destructuring is supported)\"\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t/** @type {DependencyLocation} */ (metaProperty.loc)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\t\t`${\n\t\t\t\t\t\t\t\t\t\tparser.isAsiPosition(\n\t\t\t\t\t\t\t\t\t\t\t/** @type {Range} */ (metaProperty.range)[0]\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t? \";\"\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}({})`,\n\t\t\t\t\t\t\t\t\t/** @type {Range} */ (metaProperty.range)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (metaProperty.loc);\n\t\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet str = \"\";\n\t\t\t\t\t\t\tfor (const prop of referencedPropertiesInDestructuring) {\n\t\t\t\t\t\t\t\tswitch (prop) {\n\t\t\t\t\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\t\t\t\t\tstr += `url: ${importMetaUrl()},`;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase \"webpack\":\n\t\t\t\t\t\t\t\t\t\tstr += `webpack: ${importMetaWebpackVersion()},`;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tstr += `[${JSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\tprop\n\t\t\t\t\t\t\t\t\t\t)}]: ${importMetaUnknownProperty([prop])},`;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\t`({${str}})`,\n\t\t\t\t\t\t\t\t/** @type {Range} */ (metaProperty.range)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (metaProperty.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"import.meta\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"object\"));\n\t\t\t\t\tparser.hooks.evaluateIdentifier.for(\"import.meta\").tap(\n\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\tevaluateToIdentifier(\"import.meta\", \"import.meta\", () => [], true)\n\t\t\t\t\t);\n\n\t\t\t\t\t/// import.meta.url ///\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"import.meta.url\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"string\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"import.meta.url\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\timportMetaUrl(),\n\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"import.meta.url\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"string\"));\n\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t.for(\"import.meta.url\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expr => {\n\t\t\t\t\t\t\treturn new BasicEvaluatedExpression()\n\t\t\t\t\t\t\t\t.setString(getUrl(parser.state.module))\n\t\t\t\t\t\t\t\t.setRange(/** @type {Range} */ (expr.range));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t/// import.meta.webpack ///\n\t\t\t\t\tparser.hooks.typeof\n\t\t\t\t\t\t.for(\"import.meta.webpack\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, JSON.stringify(\"number\"))\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.expression\n\t\t\t\t\t\t.for(\"import.meta.webpack\")\n\t\t\t\t\t\t.tap(\n\t\t\t\t\t\t\tPLUGIN_NAME,\n\t\t\t\t\t\t\ttoConstantDependency(parser, importMetaWebpackVersion())\n\t\t\t\t\t\t);\n\t\t\t\t\tparser.hooks.evaluateTypeof\n\t\t\t\t\t\t.for(\"import.meta.webpack\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToString(\"number\"));\n\t\t\t\t\tparser.hooks.evaluateIdentifier\n\t\t\t\t\t\t.for(\"import.meta.webpack\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, evaluateToNumber(webpackVersion));\n\n\t\t\t\t\t/// Unknown properties ///\n\t\t\t\t\tparser.hooks.unhandledExpressionMemberChain\n\t\t\t\t\t\t.for(\"import.meta\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, (expr, members) => {\n\t\t\t\t\t\t\tconst dep = new ConstDependency(\n\t\t\t\t\t\t\t\timportMetaUnknownProperty(members),\n\t\t\t\t\t\t\t\t/** @type {Range} */ (expr.range)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdep.loc = /** @type {DependencyLocation} */ (expr.loc);\n\t\t\t\t\t\t\tparser.state.module.addPresentationalDependency(dep);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\tparser.hooks.evaluate\n\t\t\t\t\t\t.for(\"MemberExpression\")\n\t\t\t\t\t\t.tap(PLUGIN_NAME, expression => {\n\t\t\t\t\t\t\tconst expr = /** @type {MemberExpression} */ (expression);\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\texpr.object.type === \"MetaProperty\" &&\n\t\t\t\t\t\t\t\texpr.object.meta.name === \"import\" &&\n\t\t\t\t\t\t\t\texpr.object.property.name === \"meta\" &&\n\t\t\t\t\t\t\t\texpr.property.type ===\n\t\t\t\t\t\t\t\t\t(expr.computed ? \"Literal\" : \"Identifier\")\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn new BasicEvaluatedExpression()\n\t\t\t\t\t\t\t\t\t.setUndefined()\n\t\t\t\t\t\t\t\t\t.setRange(/** @type {Range} */ (expr.range));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_AUTO)\n\t\t\t\t\t.tap(PLUGIN_NAME, parserHandler);\n\t\t\t\tnormalModuleFactory.hooks.parser\n\t\t\t\t\t.for(JAVASCRIPT_MODULE_TYPE_ESM)\n\t\t\t\t\t.tap(PLUGIN_NAME, parserHandler);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ImportMetaPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}