{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst Stats = require(\"./Stats\");\n\n/** @typedef {import(\"../declarations/WebpackOptions\").WatchOptions} WatchOptions */\n/** @typedef {import(\"./Compilation\")} Compilation */\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./FileSystemInfo\").FileSystemInfoEntry} FileSystemInfoEntry */\n/** @typedef {import(\"./WebpackError\")} WebpackError */\n/** @typedef {import(\"./logging/Logger\").Logger} Logger */\n/** @typedef {import(\"./util/fs\").WatchFileSystem} WatchFileSystem */\n\n/**\n * @template T\n * @callback Callback\n * @param {Error | null} err\n * @param {T=} result\n */\n\nclass Watching {\n  /**\n   * @param {Compiler} compiler the compiler\n   * @param {WatchOptions} watchOptions options\n   * @param {Callback<Stats>} handler completion handler\n   */\n  constructor(compiler, watchOptions, handler) {\n    this.startTime = null;\n    this.invalid = false;\n    this.handler = handler;\n    /** @type {Callback<void>[]} */\n    this.callbacks = [];\n    /** @type {Callback<void>[] | undefined} */\n    this._closeCallbacks = undefined;\n    this.closed = false;\n    this.suspended = false;\n    this.blocked = false;\n    this._isBlocked = () => false;\n    this._onChange = () => {};\n    this._onInvalid = () => {};\n    if (typeof watchOptions === \"number\") {\n      this.watchOptions = {\n        aggregateTimeout: watchOptions\n      };\n    } else if (watchOptions && typeof watchOptions === \"object\") {\n      this.watchOptions = {\n        ...watchOptions\n      };\n    } else {\n      this.watchOptions = {};\n    }\n    if (typeof this.watchOptions.aggregateTimeout !== \"number\") {\n      this.watchOptions.aggregateTimeout = 20;\n    }\n    this.compiler = compiler;\n    this.running = false;\n    this._initial = true;\n    this._invalidReported = true;\n    this._needRecords = true;\n    this.watcher = undefined;\n    this.pausedWatcher = undefined;\n    /** @type {Set<string> | undefined} */\n    this._collectedChangedFiles = undefined;\n    /** @type {Set<string> | undefined} */\n    this._collectedRemovedFiles = undefined;\n    this._done = this._done.bind(this);\n    process.nextTick(() => {\n      if (this._initial) this._invalidate();\n    });\n  }\n\n  /**\n   * @param {ReadonlySet<string>=} changedFiles changed files\n   * @param {ReadonlySet<string>=} removedFiles removed files\n   */\n  _mergeWithCollected(changedFiles, removedFiles) {\n    if (!changedFiles) return;\n    if (!this._collectedChangedFiles) {\n      this._collectedChangedFiles = new Set(changedFiles);\n      this._collectedRemovedFiles = new Set(removedFiles);\n    } else {\n      for (const file of changedFiles) {\n        this._collectedChangedFiles.add(file);\n        /** @type {Set<string>} */\n        this._collectedRemovedFiles.delete(file);\n      }\n      for (const file of ( /** @type {ReadonlySet<string>} */removedFiles)) {\n        this._collectedChangedFiles.delete(file);\n        /** @type {Set<string>} */\n        this._collectedRemovedFiles.add(file);\n      }\n    }\n  }\n\n  /**\n   * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} fileTimeInfoEntries info for files\n   * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} contextTimeInfoEntries info for directories\n   * @param {ReadonlySet<string>=} changedFiles changed files\n   * @param {ReadonlySet<string>=} removedFiles removed files\n   * @returns {void}\n   */\n  _go(fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles) {\n    this._initial = false;\n    if (this.startTime === null) this.startTime = Date.now();\n    this.running = true;\n    if (this.watcher) {\n      this.pausedWatcher = this.watcher;\n      this.lastWatcherStartTime = Date.now();\n      this.watcher.pause();\n      this.watcher = null;\n    } else if (!this.lastWatcherStartTime) {\n      this.lastWatcherStartTime = Date.now();\n    }\n    this.compiler.fsStartTime = Date.now();\n    if (changedFiles && removedFiles && fileTimeInfoEntries && contextTimeInfoEntries) {\n      this._mergeWithCollected(changedFiles, removedFiles);\n      this.compiler.fileTimestamps = fileTimeInfoEntries;\n      this.compiler.contextTimestamps = contextTimeInfoEntries;\n    } else if (this.pausedWatcher) {\n      if (this.pausedWatcher.getInfo) {\n        const {\n          changes,\n          removals,\n          fileTimeInfoEntries,\n          contextTimeInfoEntries\n        } = this.pausedWatcher.getInfo();\n        this._mergeWithCollected(changes, removals);\n        this.compiler.fileTimestamps = fileTimeInfoEntries;\n        this.compiler.contextTimestamps = contextTimeInfoEntries;\n      } else {\n        this._mergeWithCollected(this.pausedWatcher.getAggregatedChanges && this.pausedWatcher.getAggregatedChanges(), this.pausedWatcher.getAggregatedRemovals && this.pausedWatcher.getAggregatedRemovals());\n        this.compiler.fileTimestamps = this.pausedWatcher.getFileTimeInfoEntries();\n        this.compiler.contextTimestamps = this.pausedWatcher.getContextTimeInfoEntries();\n      }\n    }\n    this.compiler.modifiedFiles = this._collectedChangedFiles;\n    this._collectedChangedFiles = undefined;\n    this.compiler.removedFiles = this._collectedRemovedFiles;\n    this._collectedRemovedFiles = undefined;\n    const run = () => {\n      if (this.compiler.idle) {\n        return this.compiler.cache.endIdle(err => {\n          if (err) return this._done(err);\n          this.compiler.idle = false;\n          run();\n        });\n      }\n      if (this._needRecords) {\n        return this.compiler.readRecords(err => {\n          if (err) return this._done(err);\n          this._needRecords = false;\n          run();\n        });\n      }\n      this.invalid = false;\n      this._invalidReported = false;\n      this.compiler.hooks.watchRun.callAsync(this.compiler, err => {\n        if (err) return this._done(err);\n        /**\n         * @param {Error | null} err error\n         * @param {Compilation=} _compilation compilation\n         * @returns {void}\n         */\n        const onCompiled = (err, _compilation) => {\n          if (err) return this._done(err, _compilation);\n          const compilation = /** @type {Compilation} */_compilation;\n          if (this.invalid) return this._done(null, compilation);\n          if (this.compiler.hooks.shouldEmit.call(compilation) === false) {\n            return this._done(null, compilation);\n          }\n          process.nextTick(() => {\n            const logger = compilation.getLogger(\"webpack.Compiler\");\n            logger.time(\"emitAssets\");\n            this.compiler.emitAssets(compilation, err => {\n              logger.timeEnd(\"emitAssets\");\n              if (err) return this._done(err, compilation);\n              if (this.invalid) return this._done(null, compilation);\n              logger.time(\"emitRecords\");\n              this.compiler.emitRecords(err => {\n                logger.timeEnd(\"emitRecords\");\n                if (err) return this._done(err, compilation);\n                if (compilation.hooks.needAdditionalPass.call()) {\n                  compilation.needAdditionalPass = true;\n                  compilation.startTime = /** @type {number} */\n                  this.startTime;\n                  compilation.endTime = Date.now();\n                  logger.time(\"done hook\");\n                  const stats = new Stats(compilation);\n                  this.compiler.hooks.done.callAsync(stats, err => {\n                    logger.timeEnd(\"done hook\");\n                    if (err) return this._done(err, compilation);\n                    this.compiler.hooks.additionalPass.callAsync(err => {\n                      if (err) return this._done(err, compilation);\n                      this.compiler.compile(onCompiled);\n                    });\n                  });\n                  return;\n                }\n                return this._done(null, compilation);\n              });\n            });\n          });\n        };\n        this.compiler.compile(onCompiled);\n      });\n    };\n    run();\n  }\n\n  /**\n   * @param {Compilation} compilation the compilation\n   * @returns {Stats} the compilation stats\n   */\n  _getStats(compilation) {\n    const stats = new Stats(compilation);\n    return stats;\n  }\n\n  /**\n   * @param {(Error | null)=} err an optional error\n   * @param {Compilation=} compilation the compilation\n   * @returns {void}\n   */\n  _done(err, compilation) {\n    this.running = false;\n    const logger = /** @type {Logger} */\n    compilation && compilation.getLogger(\"webpack.Watching\");\n\n    /** @type {Stats | undefined} */\n    let stats = undefined;\n\n    /**\n     * @param {Error} err error\n     * @param {Callback<void>[]=} cbs callbacks\n     */\n    const handleError = (err, cbs) => {\n      this.compiler.hooks.failed.call(err);\n      this.compiler.cache.beginIdle();\n      this.compiler.idle = true;\n      this.handler(err, /** @type {Stats} */stats);\n      if (!cbs) {\n        cbs = this.callbacks;\n        this.callbacks = [];\n      }\n      for (const cb of cbs) cb(err);\n    };\n    if (this.invalid && !this.suspended && !this.blocked && !(this._isBlocked() && (this.blocked = true))) {\n      if (compilation) {\n        logger.time(\"storeBuildDependencies\");\n        this.compiler.cache.storeBuildDependencies(compilation.buildDependencies, err => {\n          logger.timeEnd(\"storeBuildDependencies\");\n          if (err) return handleError(err);\n          this._go();\n        });\n      } else {\n        this._go();\n      }\n      return;\n    }\n    if (compilation) {\n      compilation.startTime = /** @type {number} */this.startTime;\n      compilation.endTime = Date.now();\n      stats = new Stats(compilation);\n    }\n    this.startTime = null;\n    if (err) return handleError(err);\n    const cbs = this.callbacks;\n    this.callbacks = [];\n    logger.time(\"done hook\");\n    this.compiler.hooks.done.callAsync( /** @type {Stats} */stats, err => {\n      logger.timeEnd(\"done hook\");\n      if (err) return handleError(err, cbs);\n      this.handler(null, stats);\n      logger.time(\"storeBuildDependencies\");\n      this.compiler.cache.storeBuildDependencies( /** @type {Compilation} */\n      compilation.buildDependencies, err => {\n        logger.timeEnd(\"storeBuildDependencies\");\n        if (err) return handleError(err, cbs);\n        logger.time(\"beginIdle\");\n        this.compiler.cache.beginIdle();\n        this.compiler.idle = true;\n        logger.timeEnd(\"beginIdle\");\n        process.nextTick(() => {\n          if (!this.closed) {\n            this.watch( /** @type {Compilation} */\n            compilation.fileDependencies, /** @type {Compilation} */\n            compilation.contextDependencies, /** @type {Compilation} */\n            compilation.missingDependencies);\n          }\n        });\n        for (const cb of cbs) cb(null);\n        this.compiler.hooks.afterDone.call( /** @type {Stats} */stats);\n      });\n    });\n  }\n\n  /**\n   * @param {Iterable<string>} files watched files\n   * @param {Iterable<string>} dirs watched directories\n   * @param {Iterable<string>} missing watched existence entries\n   * @returns {void}\n   */\n  watch(files, dirs, missing) {\n    this.pausedWatcher = null;\n    this.watcher = /** @type {WatchFileSystem} */\n    this.compiler.watchFileSystem.watch(files, dirs, missing, /** @type {number} */this.lastWatcherStartTime, this.watchOptions, (err, fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles) => {\n      if (err) {\n        this.compiler.modifiedFiles = undefined;\n        this.compiler.removedFiles = undefined;\n        this.compiler.fileTimestamps = undefined;\n        this.compiler.contextTimestamps = undefined;\n        this.compiler.fsStartTime = undefined;\n        return this.handler(err);\n      }\n      this._invalidate(fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles);\n      this._onChange();\n    }, (fileName, changeTime) => {\n      if (!this._invalidReported) {\n        this._invalidReported = true;\n        this.compiler.hooks.invalid.call(fileName, changeTime);\n      }\n      this._onInvalid();\n    });\n  }\n\n  /**\n   * @param {Callback<void>=} callback signals when the build has completed again\n   * @returns {void}\n   */\n  invalidate(callback) {\n    if (callback) {\n      this.callbacks.push(callback);\n    }\n    if (!this._invalidReported) {\n      this._invalidReported = true;\n      this.compiler.hooks.invalid.call(null, Date.now());\n    }\n    this._onChange();\n    this._invalidate();\n  }\n\n  /**\n   * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} fileTimeInfoEntries info for files\n   * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} contextTimeInfoEntries info for directories\n   * @param {ReadonlySet<string>=} changedFiles changed files\n   * @param {ReadonlySet<string>=} removedFiles removed files\n   * @returns {void}\n   */\n  _invalidate(fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles) {\n    if (this.suspended || this._isBlocked() && (this.blocked = true)) {\n      this._mergeWithCollected(changedFiles, removedFiles);\n      return;\n    }\n    if (this.running) {\n      this._mergeWithCollected(changedFiles, removedFiles);\n      this.invalid = true;\n    } else {\n      this._go(fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles);\n    }\n  }\n  suspend() {\n    this.suspended = true;\n  }\n  resume() {\n    if (this.suspended) {\n      this.suspended = false;\n      this._invalidate();\n    }\n  }\n\n  /**\n   * @param {Callback<void>} callback signals when the watcher is closed\n   * @returns {void}\n   */\n  close(callback) {\n    if (this._closeCallbacks) {\n      if (callback) {\n        this._closeCallbacks.push(callback);\n      }\n      return;\n    }\n    /**\n     * @param {WebpackError | null} err error if any\n     * @param {Compilation=} compilation compilation if any\n     */\n    const finalCallback = (err, compilation) => {\n      this.running = false;\n      this.compiler.running = false;\n      this.compiler.watching = undefined;\n      this.compiler.watchMode = false;\n      this.compiler.modifiedFiles = undefined;\n      this.compiler.removedFiles = undefined;\n      this.compiler.fileTimestamps = undefined;\n      this.compiler.contextTimestamps = undefined;\n      this.compiler.fsStartTime = undefined;\n      /**\n       * @param {WebpackError | null} err error if any\n       */\n      const shutdown = err => {\n        this.compiler.hooks.watchClose.call();\n        const closeCallbacks = /** @type {Callback<void>[]} */\n        this._closeCallbacks;\n        this._closeCallbacks = undefined;\n        for (const cb of closeCallbacks) cb(err);\n      };\n      if (compilation) {\n        const logger = compilation.getLogger(\"webpack.Watching\");\n        logger.time(\"storeBuildDependencies\");\n        this.compiler.cache.storeBuildDependencies(compilation.buildDependencies, err2 => {\n          logger.timeEnd(\"storeBuildDependencies\");\n          shutdown(err || err2);\n        });\n      } else {\n        shutdown(err);\n      }\n    };\n    this.closed = true;\n    if (this.watcher) {\n      this.watcher.close();\n      this.watcher = null;\n    }\n    if (this.pausedWatcher) {\n      this.pausedWatcher.close();\n      this.pausedWatcher = null;\n    }\n    this._closeCallbacks = [];\n    if (callback) {\n      this._closeCallbacks.push(callback);\n    }\n    if (this.running) {\n      this.invalid = true;\n      this._done = finalCallback;\n    } else {\n      finalCallback(null);\n    }\n  }\n}\nmodule.exports = Watching;","map":{"version":3,"names":["Stats","require","Watching","constructor","compiler","watchOptions","handler","startTime","invalid","callbacks","_closeCallbacks","undefined","closed","suspended","blocked","_isBlocked","_onChange","_onInvalid","aggregateTimeout","running","_initial","_invalidReported","_needRecords","watcher","pausedWatcher","_collectedChangedFiles","_collectedRemovedFiles","_done","bind","process","nextTick","_invalidate","_mergeWithCollected","changedFiles","removedFiles","Set","file","add","delete","_go","fileTimeInfoEntries","contextTimeInfoEntries","Date","now","lastWatcherStartTime","pause","fsStartTime","fileTimestamps","contextTimestamps","getInfo","changes","removals","getAggregatedChanges","getAggregatedRemovals","getFileTimeInfoEntries","getContextTimeInfoEntries","modifiedFiles","run","idle","cache","endIdle","err","readRecords","hooks","watchRun","callAsync","onCompiled","_compilation","compilation","shouldEmit","call","logger","getLogger","time","emitAssets","timeEnd","emitRecords","needAdditionalPass","endTime","stats","done","additionalPass","compile","_getStats","handleError","cbs","failed","beginIdle","cb","storeBuildDependencies","buildDependencies","watch","fileDependencies","contextDependencies","missingDependencies","afterDone","files","dirs","missing","watchFileSystem","fileName","changeTime","invalidate","callback","push","suspend","resume","close","finalCallback","watching","watchMode","shutdown","watchClose","closeCallbacks","err2","module","exports"],"sources":["/Volumes/storage/projects/project-mcnt/node_modules/webpack/lib/Watching.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst Stats = require(\"./Stats\");\n\n/** @typedef {import(\"../declarations/WebpackOptions\").WatchOptions} WatchOptions */\n/** @typedef {import(\"./Compilation\")} Compilation */\n/** @typedef {import(\"./Compiler\")} Compiler */\n/** @typedef {import(\"./FileSystemInfo\").FileSystemInfoEntry} FileSystemInfoEntry */\n/** @typedef {import(\"./WebpackError\")} WebpackError */\n/** @typedef {import(\"./logging/Logger\").Logger} Logger */\n/** @typedef {import(\"./util/fs\").WatchFileSystem} WatchFileSystem */\n\n/**\n * @template T\n * @callback Callback\n * @param {Error | null} err\n * @param {T=} result\n */\n\nclass Watching {\n\t/**\n\t * @param {Compiler} compiler the compiler\n\t * @param {WatchOptions} watchOptions options\n\t * @param {Callback<Stats>} handler completion handler\n\t */\n\tconstructor(compiler, watchOptions, handler) {\n\t\tthis.startTime = null;\n\t\tthis.invalid = false;\n\t\tthis.handler = handler;\n\t\t/** @type {Callback<void>[]} */\n\t\tthis.callbacks = [];\n\t\t/** @type {Callback<void>[] | undefined} */\n\t\tthis._closeCallbacks = undefined;\n\t\tthis.closed = false;\n\t\tthis.suspended = false;\n\t\tthis.blocked = false;\n\t\tthis._isBlocked = () => false;\n\t\tthis._onChange = () => {};\n\t\tthis._onInvalid = () => {};\n\t\tif (typeof watchOptions === \"number\") {\n\t\t\tthis.watchOptions = {\n\t\t\t\taggregateTimeout: watchOptions\n\t\t\t};\n\t\t} else if (watchOptions && typeof watchOptions === \"object\") {\n\t\t\tthis.watchOptions = { ...watchOptions };\n\t\t} else {\n\t\t\tthis.watchOptions = {};\n\t\t}\n\t\tif (typeof this.watchOptions.aggregateTimeout !== \"number\") {\n\t\t\tthis.watchOptions.aggregateTimeout = 20;\n\t\t}\n\t\tthis.compiler = compiler;\n\t\tthis.running = false;\n\t\tthis._initial = true;\n\t\tthis._invalidReported = true;\n\t\tthis._needRecords = true;\n\t\tthis.watcher = undefined;\n\t\tthis.pausedWatcher = undefined;\n\t\t/** @type {Set<string> | undefined} */\n\t\tthis._collectedChangedFiles = undefined;\n\t\t/** @type {Set<string> | undefined} */\n\t\tthis._collectedRemovedFiles = undefined;\n\t\tthis._done = this._done.bind(this);\n\t\tprocess.nextTick(() => {\n\t\t\tif (this._initial) this._invalidate();\n\t\t});\n\t}\n\n\t/**\n\t * @param {ReadonlySet<string>=} changedFiles changed files\n\t * @param {ReadonlySet<string>=} removedFiles removed files\n\t */\n\t_mergeWithCollected(changedFiles, removedFiles) {\n\t\tif (!changedFiles) return;\n\t\tif (!this._collectedChangedFiles) {\n\t\t\tthis._collectedChangedFiles = new Set(changedFiles);\n\t\t\tthis._collectedRemovedFiles = new Set(removedFiles);\n\t\t} else {\n\t\t\tfor (const file of changedFiles) {\n\t\t\t\tthis._collectedChangedFiles.add(file);\n\t\t\t\t/** @type {Set<string>} */\n\t\t\t\t(this._collectedRemovedFiles).delete(file);\n\t\t\t}\n\t\t\tfor (const file of /** @type {ReadonlySet<string>} */ (removedFiles)) {\n\t\t\t\tthis._collectedChangedFiles.delete(file);\n\t\t\t\t/** @type {Set<string>} */\n\t\t\t\t(this._collectedRemovedFiles).add(file);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} fileTimeInfoEntries info for files\n\t * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} contextTimeInfoEntries info for directories\n\t * @param {ReadonlySet<string>=} changedFiles changed files\n\t * @param {ReadonlySet<string>=} removedFiles removed files\n\t * @returns {void}\n\t */\n\t_go(fileTimeInfoEntries, contextTimeInfoEntries, changedFiles, removedFiles) {\n\t\tthis._initial = false;\n\t\tif (this.startTime === null) this.startTime = Date.now();\n\t\tthis.running = true;\n\t\tif (this.watcher) {\n\t\t\tthis.pausedWatcher = this.watcher;\n\t\t\tthis.lastWatcherStartTime = Date.now();\n\t\t\tthis.watcher.pause();\n\t\t\tthis.watcher = null;\n\t\t} else if (!this.lastWatcherStartTime) {\n\t\t\tthis.lastWatcherStartTime = Date.now();\n\t\t}\n\t\tthis.compiler.fsStartTime = Date.now();\n\t\tif (\n\t\t\tchangedFiles &&\n\t\t\tremovedFiles &&\n\t\t\tfileTimeInfoEntries &&\n\t\t\tcontextTimeInfoEntries\n\t\t) {\n\t\t\tthis._mergeWithCollected(changedFiles, removedFiles);\n\t\t\tthis.compiler.fileTimestamps = fileTimeInfoEntries;\n\t\t\tthis.compiler.contextTimestamps = contextTimeInfoEntries;\n\t\t} else if (this.pausedWatcher) {\n\t\t\tif (this.pausedWatcher.getInfo) {\n\t\t\t\tconst {\n\t\t\t\t\tchanges,\n\t\t\t\t\tremovals,\n\t\t\t\t\tfileTimeInfoEntries,\n\t\t\t\t\tcontextTimeInfoEntries\n\t\t\t\t} = this.pausedWatcher.getInfo();\n\t\t\t\tthis._mergeWithCollected(changes, removals);\n\t\t\t\tthis.compiler.fileTimestamps = fileTimeInfoEntries;\n\t\t\t\tthis.compiler.contextTimestamps = contextTimeInfoEntries;\n\t\t\t} else {\n\t\t\t\tthis._mergeWithCollected(\n\t\t\t\t\tthis.pausedWatcher.getAggregatedChanges &&\n\t\t\t\t\t\tthis.pausedWatcher.getAggregatedChanges(),\n\t\t\t\t\tthis.pausedWatcher.getAggregatedRemovals &&\n\t\t\t\t\t\tthis.pausedWatcher.getAggregatedRemovals()\n\t\t\t\t);\n\t\t\t\tthis.compiler.fileTimestamps =\n\t\t\t\t\tthis.pausedWatcher.getFileTimeInfoEntries();\n\t\t\t\tthis.compiler.contextTimestamps =\n\t\t\t\t\tthis.pausedWatcher.getContextTimeInfoEntries();\n\t\t\t}\n\t\t}\n\t\tthis.compiler.modifiedFiles = this._collectedChangedFiles;\n\t\tthis._collectedChangedFiles = undefined;\n\t\tthis.compiler.removedFiles = this._collectedRemovedFiles;\n\t\tthis._collectedRemovedFiles = undefined;\n\n\t\tconst run = () => {\n\t\t\tif (this.compiler.idle) {\n\t\t\t\treturn this.compiler.cache.endIdle(err => {\n\t\t\t\t\tif (err) return this._done(err);\n\t\t\t\t\tthis.compiler.idle = false;\n\t\t\t\t\trun();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this._needRecords) {\n\t\t\t\treturn this.compiler.readRecords(err => {\n\t\t\t\t\tif (err) return this._done(err);\n\n\t\t\t\t\tthis._needRecords = false;\n\t\t\t\t\trun();\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.invalid = false;\n\t\t\tthis._invalidReported = false;\n\t\t\tthis.compiler.hooks.watchRun.callAsync(this.compiler, err => {\n\t\t\t\tif (err) return this._done(err);\n\t\t\t\t/**\n\t\t\t\t * @param {Error | null} err error\n\t\t\t\t * @param {Compilation=} _compilation compilation\n\t\t\t\t * @returns {void}\n\t\t\t\t */\n\t\t\t\tconst onCompiled = (err, _compilation) => {\n\t\t\t\t\tif (err) return this._done(err, _compilation);\n\n\t\t\t\t\tconst compilation = /** @type {Compilation} */ (_compilation);\n\n\t\t\t\t\tif (this.invalid) return this._done(null, compilation);\n\n\t\t\t\t\tif (this.compiler.hooks.shouldEmit.call(compilation) === false) {\n\t\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t\t}\n\n\t\t\t\t\tprocess.nextTick(() => {\n\t\t\t\t\t\tconst logger = compilation.getLogger(\"webpack.Compiler\");\n\t\t\t\t\t\tlogger.time(\"emitAssets\");\n\t\t\t\t\t\tthis.compiler.emitAssets(compilation, err => {\n\t\t\t\t\t\t\tlogger.timeEnd(\"emitAssets\");\n\t\t\t\t\t\t\tif (err) return this._done(err, compilation);\n\t\t\t\t\t\t\tif (this.invalid) return this._done(null, compilation);\n\n\t\t\t\t\t\t\tlogger.time(\"emitRecords\");\n\t\t\t\t\t\t\tthis.compiler.emitRecords(err => {\n\t\t\t\t\t\t\t\tlogger.timeEnd(\"emitRecords\");\n\t\t\t\t\t\t\t\tif (err) return this._done(err, compilation);\n\n\t\t\t\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n\t\t\t\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n\n\t\t\t\t\t\t\t\t\tcompilation.startTime = /** @type {number} */ (\n\t\t\t\t\t\t\t\t\t\tthis.startTime\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tcompilation.endTime = Date.now();\n\t\t\t\t\t\t\t\t\tlogger.time(\"done hook\");\n\t\t\t\t\t\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\t\t\t\t\t\tthis.compiler.hooks.done.callAsync(stats, err => {\n\t\t\t\t\t\t\t\t\t\tlogger.timeEnd(\"done hook\");\n\t\t\t\t\t\t\t\t\t\tif (err) return this._done(err, compilation);\n\n\t\t\t\t\t\t\t\t\t\tthis.compiler.hooks.additionalPass.callAsync(err => {\n\t\t\t\t\t\t\t\t\t\t\tif (err) return this._done(err, compilation);\n\t\t\t\t\t\t\t\t\t\t\tthis.compiler.compile(onCompiled);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tthis.compiler.compile(onCompiled);\n\t\t\t});\n\t\t};\n\n\t\trun();\n\t}\n\n\t/**\n\t * @param {Compilation} compilation the compilation\n\t * @returns {Stats} the compilation stats\n\t */\n\t_getStats(compilation) {\n\t\tconst stats = new Stats(compilation);\n\t\treturn stats;\n\t}\n\n\t/**\n\t * @param {(Error | null)=} err an optional error\n\t * @param {Compilation=} compilation the compilation\n\t * @returns {void}\n\t */\n\t_done(err, compilation) {\n\t\tthis.running = false;\n\n\t\tconst logger =\n\t\t\t/** @type {Logger} */\n\t\t\t(compilation && compilation.getLogger(\"webpack.Watching\"));\n\n\t\t/** @type {Stats | undefined} */\n\t\tlet stats = undefined;\n\n\t\t/**\n\t\t * @param {Error} err error\n\t\t * @param {Callback<void>[]=} cbs callbacks\n\t\t */\n\t\tconst handleError = (err, cbs) => {\n\t\t\tthis.compiler.hooks.failed.call(err);\n\t\t\tthis.compiler.cache.beginIdle();\n\t\t\tthis.compiler.idle = true;\n\t\t\tthis.handler(err, /** @type {Stats} */ (stats));\n\t\t\tif (!cbs) {\n\t\t\t\tcbs = this.callbacks;\n\t\t\t\tthis.callbacks = [];\n\t\t\t}\n\t\t\tfor (const cb of cbs) cb(err);\n\t\t};\n\n\t\tif (\n\t\t\tthis.invalid &&\n\t\t\t!this.suspended &&\n\t\t\t!this.blocked &&\n\t\t\t!(this._isBlocked() && (this.blocked = true))\n\t\t) {\n\t\t\tif (compilation) {\n\t\t\t\tlogger.time(\"storeBuildDependencies\");\n\t\t\t\tthis.compiler.cache.storeBuildDependencies(\n\t\t\t\t\tcompilation.buildDependencies,\n\t\t\t\t\terr => {\n\t\t\t\t\t\tlogger.timeEnd(\"storeBuildDependencies\");\n\t\t\t\t\t\tif (err) return handleError(err);\n\t\t\t\t\t\tthis._go();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._go();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (compilation) {\n\t\t\tcompilation.startTime = /** @type {number} */ (this.startTime);\n\t\t\tcompilation.endTime = Date.now();\n\t\t\tstats = new Stats(compilation);\n\t\t}\n\t\tthis.startTime = null;\n\t\tif (err) return handleError(err);\n\n\t\tconst cbs = this.callbacks;\n\t\tthis.callbacks = [];\n\t\tlogger.time(\"done hook\");\n\t\tthis.compiler.hooks.done.callAsync(/** @type {Stats} */ (stats), err => {\n\t\t\tlogger.timeEnd(\"done hook\");\n\t\t\tif (err) return handleError(err, cbs);\n\t\t\tthis.handler(null, stats);\n\t\t\tlogger.time(\"storeBuildDependencies\");\n\t\t\tthis.compiler.cache.storeBuildDependencies(\n\t\t\t\t/** @type {Compilation} */\n\t\t\t\t(compilation).buildDependencies,\n\t\t\t\terr => {\n\t\t\t\t\tlogger.timeEnd(\"storeBuildDependencies\");\n\t\t\t\t\tif (err) return handleError(err, cbs);\n\t\t\t\t\tlogger.time(\"beginIdle\");\n\t\t\t\t\tthis.compiler.cache.beginIdle();\n\t\t\t\t\tthis.compiler.idle = true;\n\t\t\t\t\tlogger.timeEnd(\"beginIdle\");\n\t\t\t\t\tprocess.nextTick(() => {\n\t\t\t\t\t\tif (!this.closed) {\n\t\t\t\t\t\t\tthis.watch(\n\t\t\t\t\t\t\t\t/** @type {Compilation} */\n\t\t\t\t\t\t\t\t(compilation).fileDependencies,\n\t\t\t\t\t\t\t\t/** @type {Compilation} */\n\t\t\t\t\t\t\t\t(compilation).contextDependencies,\n\t\t\t\t\t\t\t\t/** @type {Compilation} */\n\t\t\t\t\t\t\t\t(compilation).missingDependencies\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfor (const cb of cbs) cb(null);\n\t\t\t\t\tthis.compiler.hooks.afterDone.call(/** @type {Stats} */ (stats));\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\t/**\n\t * @param {Iterable<string>} files watched files\n\t * @param {Iterable<string>} dirs watched directories\n\t * @param {Iterable<string>} missing watched existence entries\n\t * @returns {void}\n\t */\n\twatch(files, dirs, missing) {\n\t\tthis.pausedWatcher = null;\n\t\tthis.watcher =\n\t\t\t/** @type {WatchFileSystem} */\n\t\t\t(this.compiler.watchFileSystem).watch(\n\t\t\t\tfiles,\n\t\t\t\tdirs,\n\t\t\t\tmissing,\n\t\t\t\t/** @type {number} */ (this.lastWatcherStartTime),\n\t\t\t\tthis.watchOptions,\n\t\t\t\t(\n\t\t\t\t\terr,\n\t\t\t\t\tfileTimeInfoEntries,\n\t\t\t\t\tcontextTimeInfoEntries,\n\t\t\t\t\tchangedFiles,\n\t\t\t\t\tremovedFiles\n\t\t\t\t) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tthis.compiler.modifiedFiles = undefined;\n\t\t\t\t\t\tthis.compiler.removedFiles = undefined;\n\t\t\t\t\t\tthis.compiler.fileTimestamps = undefined;\n\t\t\t\t\t\tthis.compiler.contextTimestamps = undefined;\n\t\t\t\t\t\tthis.compiler.fsStartTime = undefined;\n\t\t\t\t\t\treturn this.handler(err);\n\t\t\t\t\t}\n\t\t\t\t\tthis._invalidate(\n\t\t\t\t\t\tfileTimeInfoEntries,\n\t\t\t\t\t\tcontextTimeInfoEntries,\n\t\t\t\t\t\tchangedFiles,\n\t\t\t\t\t\tremovedFiles\n\t\t\t\t\t);\n\t\t\t\t\tthis._onChange();\n\t\t\t\t},\n\t\t\t\t(fileName, changeTime) => {\n\t\t\t\t\tif (!this._invalidReported) {\n\t\t\t\t\t\tthis._invalidReported = true;\n\t\t\t\t\t\tthis.compiler.hooks.invalid.call(fileName, changeTime);\n\t\t\t\t\t}\n\t\t\t\t\tthis._onInvalid();\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n\t * @param {Callback<void>=} callback signals when the build has completed again\n\t * @returns {void}\n\t */\n\tinvalidate(callback) {\n\t\tif (callback) {\n\t\t\tthis.callbacks.push(callback);\n\t\t}\n\t\tif (!this._invalidReported) {\n\t\t\tthis._invalidReported = true;\n\t\t\tthis.compiler.hooks.invalid.call(null, Date.now());\n\t\t}\n\t\tthis._onChange();\n\t\tthis._invalidate();\n\t}\n\n\t/**\n\t * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} fileTimeInfoEntries info for files\n\t * @param {ReadonlyMap<string, FileSystemInfoEntry | \"ignore\">=} contextTimeInfoEntries info for directories\n\t * @param {ReadonlySet<string>=} changedFiles changed files\n\t * @param {ReadonlySet<string>=} removedFiles removed files\n\t * @returns {void}\n\t */\n\t_invalidate(\n\t\tfileTimeInfoEntries,\n\t\tcontextTimeInfoEntries,\n\t\tchangedFiles,\n\t\tremovedFiles\n\t) {\n\t\tif (this.suspended || (this._isBlocked() && (this.blocked = true))) {\n\t\t\tthis._mergeWithCollected(changedFiles, removedFiles);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.running) {\n\t\t\tthis._mergeWithCollected(changedFiles, removedFiles);\n\t\t\tthis.invalid = true;\n\t\t} else {\n\t\t\tthis._go(\n\t\t\t\tfileTimeInfoEntries,\n\t\t\t\tcontextTimeInfoEntries,\n\t\t\t\tchangedFiles,\n\t\t\t\tremovedFiles\n\t\t\t);\n\t\t}\n\t}\n\n\tsuspend() {\n\t\tthis.suspended = true;\n\t}\n\n\tresume() {\n\t\tif (this.suspended) {\n\t\t\tthis.suspended = false;\n\t\t\tthis._invalidate();\n\t\t}\n\t}\n\n\t/**\n\t * @param {Callback<void>} callback signals when the watcher is closed\n\t * @returns {void}\n\t */\n\tclose(callback) {\n\t\tif (this._closeCallbacks) {\n\t\t\tif (callback) {\n\t\t\t\tthis._closeCallbacks.push(callback);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t/**\n\t\t * @param {WebpackError | null} err error if any\n\t\t * @param {Compilation=} compilation compilation if any\n\t\t */\n\t\tconst finalCallback = (err, compilation) => {\n\t\t\tthis.running = false;\n\t\t\tthis.compiler.running = false;\n\t\t\tthis.compiler.watching = undefined;\n\t\t\tthis.compiler.watchMode = false;\n\t\t\tthis.compiler.modifiedFiles = undefined;\n\t\t\tthis.compiler.removedFiles = undefined;\n\t\t\tthis.compiler.fileTimestamps = undefined;\n\t\t\tthis.compiler.contextTimestamps = undefined;\n\t\t\tthis.compiler.fsStartTime = undefined;\n\t\t\t/**\n\t\t\t * @param {WebpackError | null} err error if any\n\t\t\t */\n\t\t\tconst shutdown = err => {\n\t\t\t\tthis.compiler.hooks.watchClose.call();\n\t\t\t\tconst closeCallbacks =\n\t\t\t\t\t/** @type {Callback<void>[]} */\n\t\t\t\t\t(this._closeCallbacks);\n\t\t\t\tthis._closeCallbacks = undefined;\n\t\t\t\tfor (const cb of closeCallbacks) cb(err);\n\t\t\t};\n\t\t\tif (compilation) {\n\t\t\t\tconst logger = compilation.getLogger(\"webpack.Watching\");\n\t\t\t\tlogger.time(\"storeBuildDependencies\");\n\t\t\t\tthis.compiler.cache.storeBuildDependencies(\n\t\t\t\t\tcompilation.buildDependencies,\n\t\t\t\t\terr2 => {\n\t\t\t\t\t\tlogger.timeEnd(\"storeBuildDependencies\");\n\t\t\t\t\t\tshutdown(err || err2);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tshutdown(err);\n\t\t\t}\n\t\t};\n\n\t\tthis.closed = true;\n\t\tif (this.watcher) {\n\t\t\tthis.watcher.close();\n\t\t\tthis.watcher = null;\n\t\t}\n\t\tif (this.pausedWatcher) {\n\t\t\tthis.pausedWatcher.close();\n\t\t\tthis.pausedWatcher = null;\n\t\t}\n\t\tthis._closeCallbacks = [];\n\t\tif (callback) {\n\t\t\tthis._closeCallbacks.push(callback);\n\t\t}\n\t\tif (this.running) {\n\t\t\tthis.invalid = true;\n\t\t\tthis._done = finalCallback;\n\t\t} else {\n\t\t\tfinalCallback(null);\n\t\t}\n\t}\n}\n\nmodule.exports = Watching;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}